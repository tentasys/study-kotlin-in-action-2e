# ğŸ“š 6ì¥ ì»¬ë ‰ì…˜ê³¼ ì‹œí€€ìŠ¤

## ğŸ“– 6.1 ì»¬ë ‰ì…˜ì— ëŒ€í•œ í•¨ìˆ˜í˜• API

### ğŸ”– 6.1.1 ì›ì†Œ ì œê±°ì™€ ë³€í™˜: filterì™€ map

```kotlin
data class Person(val name: String, val age: Int)
```

```kotlin
fun main() {
    val list = listOf(1, 2, 3, 4)
    println(list.filter { it % 2 == 0 })
}
```

- filter í•¨ìˆ˜ëŠ” ì»¬ë ‰ì…˜ì„ ìˆœíšŒí•˜ë©´ì„œ ì£¼ì–´ì§„ ëŒë‹¤ê°€ trueë¥¼ ë°˜í™˜í•˜ëŠ” ì›ì†Œë“¤ë§Œ ëª¨ì€ë‹¤.
- filter í•¨ìˆ˜ëŠ” ì£¼ì–´ì§„ ìˆ ì–´ì™€ ì¼ì¹˜í•˜ëŠ” ì›ì†Œë“¤ë¡œ ì´ë¤„ì§„ ìƒˆ ì»¬ë ‰ì…˜ì„ ë§Œë“¤ ìˆ˜ ìˆì§€ë§Œ ê·¸ ê³¼ì •ì—ì„œ ì›ì†Œë¥¼ ë³€í™˜í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.

```kotlin
fun main() {
    val list = listOf(1, 2, 3, 4)
    println(list.map { it * it })
}
```

- mapì€ ì…ë ¥ ì»¬ë ‰ì…˜ì˜ ì›ì†Œë¥¼ ë³€í™˜í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

```kotlin
fun main() {
    val numbers = listOf(1, 2, 3, 4, 5, 6, 7)
    val filtered = numbers.filterIndexed { index, element -> index % 2 == 0 && element > 3 }

    println(filtered)

    val mapped = numbers.mapIndexed { index, element -> index + element }
    println(mapped)
}
```

- indexì™€ ì›ì†Œë¥¼ í•¨ê»˜ ì œê³µ

### ğŸ”– 6.1.2 ì»¬ë ‰ì…˜ ê°’ ëˆ„ì : reduceì™€ fold

```kotlin
fun main() {
    val list = listOf(1, 2, 3, 4, 5, 6, 7)
    println(list.reduce { acc, element -> acc + element })
}
```

- reduceë¥¼ ì‚¬ìš©í•˜ë©´ ì»¬ë ‰ì…˜ì˜ ì²« ë²ˆì§¸ ê°’ì„ ëˆ„ì ê¸°ì— ë„£ëŠ”ë‹¤.
  - ë¹ˆ ì»¬ë ‰ì…˜ì— í˜¸ì¶œí•˜ë©´ ì•ˆ ëœë‹¤.

```kotlin
fun main() {
    val people = listOf(
        Person("Alice", 29),
        Person("Bob", 31),
    )
    val folded = people.fold("") { acc, person -> acc + person.name }
    println(folded)
}
```

- fold í•¨ìˆ˜ëŠ” reduceì™€ ë¹„ìŠ·í•˜ì§€ë§Œ ì²« ë²ˆì§¸ ì›ì†Œë¥¼ ëˆ„ì  ê°’ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ëŒ€ì‹ , ì„ì˜ì˜ ì‹œì‘ ê°’ì„ ì„ íƒí•  ìˆ˜ ìˆë‹¤.
- `runningReduce`, `runningFold`ë¥¼ ì‚¬ìš©í•˜ë©´ ì¤‘ê°„ ë‹¨ê³„ì˜ ëª¨ë“  ëˆ„ì  ê°’ì„ ë½‘ì•„ë‚¼ ìˆ˜ ìˆë‹¤.
  - ë°˜í™˜ê°ì²´ëŠ” ë¦¬ìŠ¤íŠ¸ë‹¤.

### ğŸ”– 6.1.3 ì»¬ë ‰ì…˜ì— ìˆ ì–´ ì ìš©: all, any, none, count, find

```kotlin
val canBeInClub27 = { p: Person -> p.age <= 27 }

fun main() {
    val people = listOf(
        Person("Alice", 27),
        Person("Bob", 31),
    )
    println(people.all(canBeInClub27))
}
```

- allì€ ëª¨ë“  ì›ì†Œê°€ ìˆ ì–´ë¥¼ ë§Œì¡±ì‹œí‚¤ëŠ”ì§€ íŒë‹¨í•œë‹¤.
- anyëŠ” ìˆ ì–´ë¥¼ ë§Œì¡±í•˜ëŠ” ì›ì†Œê°€ í•˜ë‚˜ë¼ë„ ìˆëŠ”ì§€ íŒë‹¨í•œë‹¤.
- noneì€ ìˆ ì–´ë¥¼ ë§Œì¡±í•˜ëŠ” ì›ì†Œê°€ ì—†ëŠ”ì§€ë¥¼ íŒë‹¨í•œë‹¤.

```kotlin
val canBeInClub27 = { p: Person -> p.age <= 27 }

fun main() {
    val people = listOf(
        Person("Alice", 27),
        Person("Bob", 31),
    )
    println(people.count(canBeInClub27))
}
```

- ìˆ ì–´ë¥¼ ë§Œì¡±í•˜ëŠ” ì›ì†Œì˜ ê°œìˆ˜ë¥¼ ì•Œê³  ì‹¶ë‹¤ë©´ countë¥¼ ì‚¬ìš©í•œë‹¤.
- sizeë³´ë‹¤ëŠ” countê°€ íš¨ìœ¨ì ì´ë‹¤.
  - countëŠ” ê°œìˆ˜ë§Œ ì¶”ì í•  ë¿ ê°ì²´ ìƒì„±í•˜ì§€ ì•ŠìŒ

```kotlin
val canBeInClub27 = { p: Person -> p.age <= 27 }

fun main() {
    val people = listOf(
        Person("Alice", 27),
        Person("Bob", 31),
    )
    println(people.find(canBeInClub27))
}
```

- ìˆ ì–´ë¥¼ ë§Œì¡±í•˜ëŠ” ì›ì†Œë¥¼ í•˜ë‚˜ ì°¾ê³  ì‹¶ìœ¼ë©´ find í•¨ìˆ˜ ì‚¬ìš©
- ì›ì†Œê°€ ì „í˜€ ì—†ëŠ” ê²½ìš° null ë°˜í™˜

### ğŸ”– 6.1.4 ë¦¬ìŠ¤íŠ¸ë¥¼ ë¶„í• í•´ ë¦¬ìŠ¤íŠ¸ì˜ ìŒìœ¼ë¡œ ë§Œë“¤ê¸°: partition

```kotlin
fun main() {
    val people = listOf(
        Person("Alice", 26),
        Person("Bob", 29),
        Person("Carol", 31),
    )
    val comeIn = people.filter(canBeInClub27)
    val stayOut = people.filterNot(canBeInClub27)
    println(comeIn)
    println(stayOut)
}
```

- ìœ„ ë¡œì§ì„ ë” ê°„ê²°í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

```kotlin
    val (comeIn, stayOut) = people.partition(canBeInClub27)
    println(comeIn)
    println(stayOut)
```

- partition í•¨ìˆ˜ëŠ” ì»¬ë ‰ì…˜ì„ ìˆ ì–´ë¥¼ ë§Œì¡±í•˜ëŠ” ê·¸ë£¹ê³¼ ë§Œì¡±í•˜ì§€ ì•ŠëŠ” ê·¸ë£¹ìœ¼ë¡œ ë‚˜ëˆˆë‹¤.

### ğŸ”– 6.1.5 ë¦¬ìŠ¤íŠ¸ë¥¼ ì—¬ëŸ¬ ê·¸ë£¹ìœ¼ë¡œ ì´ë¤„ì§„ ë§µìœ¼ë¡œ ë°”ê¾¸ê¸°: groupBy

```kotlin
fun main() {
    val people = listOf(
        Person("Alice", 31),
        Person("Bob", 29),
        Person("Carol", 31),
    )
    println(people.groupBy { it.age })
}
```

- ì›ì†Œë¥¼ êµ¬ë¶„í•˜ëŠ” íŠ¹ì„±ì´ í‚¤ì´ê³ , í‚¤ ê°’ì— ë”°ë¥¸ ê·¸ë£¹ì„ ìƒì„±í•œë‹¤.

### ğŸ”– 6.1.6 ì»¬ë ‰ì…˜ì„ ë§µìœ¼ë¡œ ë³€í™˜: associate, associateWith, associateBy

```kotlin
fun main() {
    val people = listOf(
        Person("Joe", 22),
        Person("Mary", 31),
    )
    val nameToAge = people.associate { it.name to it.age }
    println(nameToAge)
}
```

- ì›ì†Œë¥¼ ê·¸ë£¹í™”í•˜ì§€ ì•Šìœ¼ë©´ì„œ ì»¬ë ‰ì…˜ìœ¼ë¡œë¶€í„° ë§µì„ ë§Œë“¤ì–´ë‚´ê³  ì‹¶ë‹¤ë©´ `associate` í•¨ìˆ˜ë¥¼ ì‚¬ìš©

```kotlin
fun main() {
    val people = listOf(
        Person("Joe", 22),
        Person("Mary", 31),
        Person("Jamie", 22)
    )
    val personToAge = people.associateWith { it.age }
    println(personToAge)
    val ageToPerson = people.associateBy { it.age }
    println(ageToPerson)
}
```

- `associateWith`ëŠ” ì»¬ë ‰ì…˜ì˜ ì›ë˜ ì›ì†Œë¥¼ í‚¤ë¡œ ì‚¬ìš©
- `associateBy`ëŠ” ì»¬ë ‰ì…˜ì˜ ì›ë˜ ì›ì†Œë¥¼ ë§µì˜ ê°’ìœ¼ë¡œ í•˜ê³ , ëŒë‹¤ê°€ ë§Œë“¤ì–´ë‚´ëŠ” ê°’ì„ ë§µì˜ í‚¤ë¡œ ì‚¬ìš©

### ğŸ”– 6.1.7 ê°€ë³€ ì»¬ë ‰ì…˜ì˜ ì›ì†Œ ë³€ê²½: replaceAll, fill

```kotlin
fun main() {
    val names = mutableListOf("Martin", "Samuel")
    println(names)

    names.replaceAll { it.uppercase() }
    println(names)

    names.fill("(redacted)")
    println(names)
}
```

- `replaceAll`í•¨ìˆ˜ë¥¼ ê°€ë³€ ì»¬ë ‰ì…˜ì— ì ìš©í•˜ë©´ ì§€ì •í•œ ëŒë‹¤ë¡œ ëª¨ë“  ì›ì†Œë¥¼ ë³€ê²½í•œë‹¤.
- ê°€ë³€ ë¦¬ìŠ¤íŠ¸ì˜ ëª¨ë“  ì›ì†Œë¥¼ ë˜‘ê°™ì€ ê°’ìœ¼ë¡œ ë°”ê¾¸ëŠ” ê²½ìš°ì—ëŠ” `fill`í•¨ìˆ˜ë¥¼ ì“¸ ìˆ˜ ìˆë‹¤.

### ğŸ”– 6.1.8 ì»¬ë ‰ì…˜ì˜ íŠ¹ë³„í•œ ê²½ìš° ì²˜ë¦¬: ifEmpty

```kotlin
fun main() {
    val empty = emptyList<String>()
    val full = listOf("apple", "orange", "banana")
    
    println(empty.ifEmpty { listOf("no", "values", "here") })
    println(full.ifEmpty { listOf("no", "values", "here") })
}
```

- `ifEmpty` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í™”ë©´ ì•„ë¬´ ì›ì†Œë„ ì—†ì„ ë•Œ ê¸°ë³¸ê°’ì„ ìƒì„±í•˜ëŠ” ëŒë‹¤ë¥¼ ì œê³µí•  ìˆ˜ ìˆë‹¤.
- `ifBlank` í•¨ìˆ˜ëŠ” ê³µë°±ë§Œ ë“¤ì–´ìˆëŠ” ë¬¸ìì—´ì„ ë‹¤ë£° ìˆ˜ ìˆë‹¤.

### ğŸ”– 6.1.9 ì»¬ë ‰ì…˜ ë‚˜ëˆ„ê¸°: chunkedì™€ windowed

```kotlin
val temperatures = listOf(27.7, 29.8, 22.0, 35.5, 19.1)
```

```kotlin
fun main() {
    println(temperatures.windowed(3))
    //[[27.7, 29.8, 22.0], [29.8, 22.0, 35.5], [22.0, 35.5, 19.1]]
    
    println(temperatures.windowed(3) { it.sum() / it.size })
    //[26.5, 29.099999999999998, 25.53333333333333]
}
```

- ìŠ¬ë¼ì´ë”© ìœˆë„ìš°ë¥¼ ìƒì„±í•˜ê³ ì `windowed` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```kotlin
fun main() {
    println(temperatures.chunked(2))
    // [[27.7, 29.8], [22.0, 35.5], [19.1]]
    
    println(temperatures.chunked(2) { it.sum() })
    // [57.5, 57.5, 19.1]
}
```

- ì»¬ë ‰ì…˜ì„ ì–´ë–¤ ì£¼ì–´ì§„ í¬ê¸°ì˜ ì„œë¡œ ê²¹ì¹˜ì§€ ì•ŠëŠ”(ì„œë¡œì†Œ) ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆ„ê³  ì‹¶ì„ ë•ŒëŠ” `chunked` í•¨ìˆ˜ë¥¼ ì‚¬ìš©

### ğŸ”– 6.1.10 ì»¬ë ‰ì…˜ í•©ì¹˜ê¸°: zip

```kotlin
fun main() {
    val names = listOf("Joe", "Mary", "Jamie")
    val ages = listOf(22, 31, 22, 44, 0)
    println(names.zip(ages))
    // [(Joe, 22), (Mary, 31), (Jamie, 22)]
    
    println(names.zip(ages) { name, age -> Person(name, age) })
    // [Person(name=Joe, age=22), Person(name=Mary, age=31), Person(name=Jamie, age=22)]
}
```

- `zip` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ë‘ ì»¬ë ‰ì…˜ì—ì„œ ê°™ì€ ì¸ë±ìŠ¤ì— ìˆëŠ” ì›ì†Œë“¤ì˜ ìŒìœ¼ë¡œ ì´ë¤„ì§„ ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
- ê²°ê³¼ ì»¬ë ‰ì…˜ì˜ ê¸¸ì´ëŠ” ë” ì§§ì€ ìª½ì˜ ê¸¸ì´ì™€ ê°™ë‹¤.

```kotlin
fun main() {
    val countries = listOf("DE", "NL", "US")
    println(names zip ages zip countries)
    // [((Joe, 22), DE), ((Mary, 31), NL), ((Jamie, 22), US)]
}
```

- ì¤‘ìœ„ í‘œê¸°ë²•ì„ ì“¸ ìˆ˜ ìˆë‹¤.
- ì—°ì‡„ í˜¸ì¶œì´ ê°€ëŠ¥í•˜ê³ , ë¦¬ìŠ¤íŠ¸ì˜ ë¦¬ìŠ¤íŠ¸ê°€ ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.

### ğŸ”– 6.1.11 ë‚´í¬ëœ ì»¬ë ‰ì…˜ì˜ ì›ì†Œ ì²˜ë¦¬: flatMapê³¼ flatten

```kotlin
class Book(val title: String, val authors: List<String>)

val library = listOf(
    Book("Kotlin in Action", listOf("Isakova", "Elizarov", "Aigner", "Jemerov")),
    Book("Atomic Kotlin", listOf("Eckel", "Isakova")),
    Book("The Three-Body Problem", listOf("Liu"))
)
```

```kotlin
fun main() {
    val authors = library.map { it.authors }
    println(authors)
    // [[Isakova, Elizarov, Aigner, Jemerov], [Eckel, Isakova], [Liu]]
}
```

- ë‚´í¬ëœ ì»¬ë ‰ì…˜ìœ¼ë¡œ ë°˜í™˜ëœë‹¤.

```kotlin
fun main() {
    val authors = library.flatMap { it.authors }
    println(authors)
    // [Isakova, Elizarov, Aigner, Jemerov, Eckel, Isakova, Liu]
    println(authors.toSet())
    // [Isakova, Elizarov, Aigner, Jemerov, Eckel, Liu]
}
```

- `flatMap` í•¨ìˆ˜ëŠ” ì»¬ë ‰ì…˜ì˜ ê° ì›ì†Œë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ì£¼ì–´ì§„ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ë³€í™˜í•œë‹¤.
- ë³€í™˜í•œ ê²°ê³¼ë¥¼ í•˜ë‚˜ì˜ ë¦¬ìŠ¤íŠ¸ë¡œ í•©ì¹œë‹¤.
- ë³€í™˜í•  ê²ƒì´ ì—†ê³  ë‚´í¬ëœ ì»¬ë ‰ì…˜ì„ í‰í‰í•œ ì»¬ë ‰ì…˜ìœ¼ë¡œ ë§Œë“¤ê³  ì‹¶ë‹¤ë©´ `flatten` í•¨ìˆ˜ë¥¼ ì‚¬ìš©

## ğŸ“– 6.2 ì§€ì—° ê³„ì‚° ì»¬ë ‰ì…˜ ì—°ì‚°: ì‹œí€€ìŠ¤

```kotlin
people.map(Person::name).filter { it.startsWith("A") }
```

- ìœ„ í•¨ìˆ˜ëŠ” ë¦¬ìŠ¤íŠ¸ë¥¼ ê²°êµ­ 2ê°œë¥¼ ë§Œë“ ë‹¤.
- ì›ì†Œê°€ ìˆ˜ë°±ë§Œ ê°œê°€ ë˜ë©´ íš¨ìœ¨ì´ ë–¨ì–´ì§„ë‹¤.

```kotlin
people
    .asSequence()
    .map(Person::name)
    .filter { it.startsWith("A") }
    .toList()
```

- ì¤‘ê°„ ê²°ê³¼ë¥¼ ì €ì¥í•˜ëŠ” ì»¬ë ‰ì…˜ì´ ìƒê¸°ì§€ ì•Šê¸° ë•Œë¬¸ì— ì›ì†Œê°€ ë§ì€ ê²½ìš° ì„±ëŠ¥ì´ ëˆˆì— ë„ê²Œ ì¢‹ì•„ì§„ë‹¤.
- ì‹œí€€ìŠ¤ì˜ ì›ì†ŒëŠ” í•„ìš”í•  ë•Œ lazy ê³„ì‚°ì´ ëœë‹¤.

### ğŸ”– 6.2.1 ì‹œí€€ìŠ¤ ì—°ì‚° ì‹¤í–‰: ì¤‘ê°„ ì—°ì‚°ê³¼ ìµœì¢… ì—°ì‚°

- ì¤‘ê°„ ì—°ì‚°ì€ ë‹¤ë¥¸ ì‹œí€€ìŠ¤ë¥¼ ë°˜í™˜í•˜ê³ , ì§€ì—° ê³„ì‚°ëœë‹¤.
- ìµœì¢… ì—°ì‚°ì€ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.

```kotlin
fun main() {
    listOf(1, 2, 3, 4)
        .asSequence()
        .map {
            print("map($it) ")
            it * it
        }
        .filter {
            print("filter($it) ")
            it % 2 == 0
        }
}
```

- ì´ ì½”ë“œëŠ” ì•„ë¬´ ë‚´ìš©ë„ ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤.

```kotlin
fun main() {
    listOf(1, 2, 3, 4)
        .asSequence()
        .map {
            print("map($it) ")
            it * it
        }
        .filter {
            print("filter($it) ")
            it % 2 == 0
        }.toList()
}
```

- ìµœì¢… ì—°ì‚°ì„ í˜¸ì¶œí•˜ë©´ ì—°ê¸°ëë˜ ëª¨ë“  ê³„ì‚°ì´ ìˆ˜í–‰ëœë‹¤.

```kotlin
fun main() {
    println(
        listOf(1, 2, 3, 4)
            .asSequence()
            .map { it * it }
            .find { it > 3 }
    )
    // 4
}
```

- ì‹œí€€ìŠ¤ì—ì„œ ì—°ì‚°ìˆœì„œëŠ” **ê° ì›ì†Œì— ëŒ€í•´ ìˆœì°¨ì ìœ¼ë¡œ ì ìš©**ëœë‹¤.
  - ì›ì†Œì— ì—°ì‚°ì„ ì°¨ë¡€ëŒ€ë¡œ ì ìš©í•˜ë‹¤ê°€ ê²°ê³¼ê°€ ì–»ì–´ì§€ë©´ ê·¸ ì´í›„ì˜ ì›ì†Œì— ëŒ€í•´ì„œëŠ” ë³€í™˜ì´ ì´ë¤„ì§€ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤ëŠ” ê²ƒ
- ì¦‰ì‹œ ê³„ì‚°ì€ ì „ì²´ ì»¬ë ‰ì…˜ì— ì—°ì‚°ì„ ì ìš©ì‹œí‚¤ì§€ë§Œ ì§€ì—° ê³„ì‚°ì€ ì›ì†Œë¥¼ í•œë²ˆì— í•˜ë‚˜ì”© ì²˜ë¦¬í•œë‹¤.

```kotlin
fun main() {
    val people = listOf(
        Person("Alice", 29), Person("Bob", 31),
        Person("Charles", 31), Person("Dan", 21)
    )
    println(
        people
            .asSequence()
            .map(Person::name)
            .filter { it.length < 4 }
            .toList()
    )
    // [Bob, Dan]
    println(
        people
            .asSequence()
            .filter { it.name.length < 4 }
            .map(Person::name)
            .toList())
    // [Bob, Dan]
}
```

- ì—°ì‡„ì ì¸ ì—°ì‚°ì—ì„œ ë” ë¹¨ë¦¬ ì›ì†Œë“¤ì„ ì œê±°í•˜ë©´ í• ìˆ˜ë¡ ì½”ë“œì˜ ì„±ëŠ¥ì´ ì¢‹ì•„ì§„ë‹¤.

### ğŸ”– 6.2.2 ì‹œí€€ìŠ¤ ë§Œë“¤ê¸°

```kotlin
fun main() {
    val naturalNumbers = generateSequence(0) { it + 1 }
    val numbersTo100 = naturalNumbers.takeWhile { it <= 100 }
    println(numbersTo100.sum())
    // 5050
}
```

- `generateSequence` í•¨ìˆ˜ëŠ” ì´ì „ì˜ ì›ì†Œë¥¼ ì¸ìë¡œ ë°›ì•„ ë‹¤ìŒ ì›ì†Œë¥¼ ê³„ì‚°í•œë‹¤.
- ìœ„ ë³€ìˆ˜ëŠ” ëª¨ë‘ ì§€ì—° ê³„ì‚°ëœë‹¤.

```kotlin
import java.io.File

fun File.isInsideHiddenDirectory() =
    generateSequence(this) { it.parentFile }.any { it.isHidden }

val file = File("/Users/svtk/.HiddenDir/a.txt")
println(file.isInsideHiddenDirectory())
// true

```

- ê°ì²´ì˜ ì¡°ìƒë“¤ë¡œ ì´ë¤„ì§„ ì‹œí€€ìŠ¤ë¥¼ ë§Œë“œëŠ” ê²ƒë„ ì‹œí€€ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.
