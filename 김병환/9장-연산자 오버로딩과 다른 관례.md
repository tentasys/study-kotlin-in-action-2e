# ğŸ“š 9ì¥ ì—°ì‚°ì ì˜¤ë²„ë¡œë”©ê³¼ ë‹¤ë¥¸ ê´€ë¡€

ì½”í‹€ë¦°ì€ ì–´ë–¤ ì–¸ì–´ ê¸°ëŠ¥ê³¼ ë¯¸ë¦¬ ì •í•´ì§„ ì´ë¦„ì˜ í•¨ìˆ˜ë¥¼ ì—°ê²°í•´ì£¼ëŠ” ê¸°ë²•ì¸ ê´€ë¡€ì— ì˜ì¡´í•œë‹¤.

## ğŸ“– 9.1 ì‚°ìˆ  ì—°ì‚°ìë¥¼ ì˜¤ë²„ë¡œë“œí•´ì„œ ì„ì˜ì˜ í´ë˜ìŠ¤ì— ëŒ€í•œ ì—°ì‚°ì„ ë” í¸ë¦¬í•˜ê²Œ ë§Œë“¤ê¸°

### ğŸ”– 9.1.1 plus, times, divide ë“±: ì´í•­ ì‚°ìˆ  ì—°ì‚° ì˜¤ë²„ë¡œë”©

```kotlin
data class Point(val x: Int, val y: Int) {
    operator fun plus(other: Point): Point {
        return Point(x + other.x, y + other.y)
    }
}

fun main() {
    val p1 = Point(10, 20)
    val p2 = Point(30, 40)
    println(p1 + p2) // + ê¸°í˜¸ë¥¼ ì“°ë©´ plus í•¨ìˆ˜ í˜¸ì¶œ
}
```

- plus í•¨ìˆ˜ ì•ì— operator í‚¤ì›Œë“œë¥¼ ë¶™ì—¬ì•¼ í•œë‹¤.
- ì—°ì‚°ìë¥¼ í™•ì¥ í•¨ìˆ˜ë¡œ ì •ì˜í•  ìˆ˜ë„ ìˆë‹¤.

| í‘œí˜„ì‹   | í•¨ìˆ˜ ì´ë¦„   |
|----------|-------------|
| a + b    | plus        |
| a - b    | minus       |
| a * b    | times       |
| a / b    | div         |
| a % b    | mod         |

- ì—°ì‚°ì ìš°ì„ ìˆœìœ„ëŠ” í‘œì¤€ ìˆ«ì íƒ€ì…ì— ëŒ€í•œ ì—°ì‚°ì ìš°ì„ ìˆœìœ„ì™€ ê°™ë‹¤.

```kotlin
operator fun Point.times(scale: Double): Point {
    return Point((x * scale).toInt(), (y * scale).toInt())
}

fun main() {
    val p = Point(10, 20)
    println(p * 1.5)
}
```

- ì—°ì‚°ìë¥¼ ì •ì˜í•  ë•Œ ë‘ í”¼ì—°ì‚°ìê°€ ê°™ì€ íƒ€ì…ì¼ í•„ìš”ëŠ” ì—†ë‹¤.
- ìë™ìœ¼ë¡œ êµí™˜ë²•ì¹™ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.

```kotlin
operator fun Char.times(count: Int): String {
    return toString().repeat(count)
}

fun main() {
    println('a' * 3)
}
```

- ì—°ì‚°ì í•¨ìˆ˜ì˜ ë°˜í™˜ íƒ€ì…ì´ ê¼­ ë‘ í”¼ì—°ì‚°ì ì¤‘ í•˜ë‚˜ì™€ ì¼ì¹˜í•´ì•¼ë§Œ í•˜ëŠ” ê²ƒë„ ì•„ë‹ˆë‹¤.

### ğŸ”– 9.1.2 ì—°ì‚°ì„ ì ìš©í•œ ë‹¤ìŒì— ê·¸ ê²°ê³¼ë¥¼ ë°”ë¡œ ëŒ€ì…: ë³µí•© ëŒ€ì… ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

```kotlin
fun main() {
    var point = Point(1, 2)
    point += Point(3, 4)
    println(point)
}
```

- plusì™€ ê°™ì€ ì—°ì‚°ìë¥¼ ì˜¤ë²„ë¡œë”©í•˜ë©´ ë³µí•© ëŒ€ì… ì—°ì‚°ìë¥¼ ìë™ìœ¼ë¡œ ì§€ì›í•œë‹¤.

```kotlin
operator fun <T> MutableCollection<T>.plusAssign(element: T) {
    this.add(element)
}
```

- ì–´ë–¤ í´ë˜ìŠ¤ê°€ plus, plusAssignì„ ëª¨ë‘ ì •ì˜í•˜ê³  +=ì„ ì‚¬ìš©í•˜ë©´ ì˜¤ë¥˜ë¥¼ ë³´ê³ í•œë‹¤.
- ì½”í‹€ë¦° í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì»¬ë ‰ì…˜ì— ëŒ€í•´ 2ê°€ì§€ ì ‘ê·¼ ë°©ë²•ì„ ì œê³µ
  - +,-ëŠ” í•­ìƒ ìƒˆë¡œìš´ ì»¬ë ‰ì…˜ ë°˜í™˜
  - +=, -= ì—°ì‚°ìëŠ” í•­ìƒ ë³€ê²½ ê°€ëŠ¥í•œ ì»¬ë ‰ì…˜ì— ì‘ìš©í•´ ë©”ëª¨ë¦¬ì— ìˆëŠ” ê°ì²´ ìƒíƒœë¥¼ ë³€í™”

### ğŸ”– 9.1.3 í”¼ì—°ì‚°ìê°€ 1ê°œë¿ì¸ ì—°ì‚°ì: ë‹¨í•­ ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

```kotlin
operator fun Point.unaryMinus(): Point {
    return Point(-x, -y)
}
```

- ë‹¨í•­ ì—°ì‚°ìë¥¼ ì˜¤ë²„ë¡œë”©í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜ëŠ” ì¸ìë¥¼ ì·¨í•˜ì§€ ì•ŠëŠ”ë‹¤.

| í‘œí˜„ì‹ | í•¨ìˆ˜ ì´ë¦„    |
|--------|-------------|
| +a     | unaryPlus   |
| -a     | unaryMinus  |
| !a     | not         |
| a++, ++a    | inc    |
| a-- , --a   | dec    |

```kotlin
fun main() {
    var bd = BigDecimal.ZERO
    println(bd++) // í›„ìœ„ ì¦ê°€ ì—°ì‚°ìëŠ” printlnì´ ì‹¤í–‰ëœ ë‹¤ìŒì— ê°’ ì¦ê°€
    println(bd)
    println(++bd) // ì „ìœ„ ì¦ê°€ ì—°ì‚°ìëŠ” printlnì´ ì‹¤í–‰ë˜ê¸° ì „ì— ê°’ ì¦ê°€
}
```

## ğŸ“– 9.2 ë¹„êµ ì—°ì‚°ìë¥¼ ì˜¤ë²„ë¡œë”©í•´ì„œ ê°ì²´ë“¤ ì‚¬ì´ì˜ ê´€ê³„ë¥¼ ì‰½ê²Œ ê²€ì‚¬

### ğŸ”– 9.2.1 ë™ë“±ì„± ì—°ì‚°ì: equals

- != ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ëŠ” ì‹ë„ equals í˜¸ì¶œë¡œ ì»´íŒŒì¼ ëœë‹¤.
- null ê²€ì‚¬ë„ í•œë‹¤.

```kotlin
class Point(val x: Int, val y: Int) {
    override fun equals(other: Any?): Boolean {
        if (other === this) return true
        if (other !is Point) return false
        return other.x == x && other.y == y
    }
}
```

- ë™ë“±ì„± ë¹„êµ ì—°ì‚°ì(===)ëŠ” ìë°” == ì—°ì‚°ìì™€ ê°™ë‹¤.
  - ìì‹ ì˜ ë‘ í”¼ì—°ì‚°ìê°€ ì„œë¡œ ê°™ì€ ê°ì²´ã…¡ã„¹ ê°€ë¦¬í‚¤ëŠ”ì§€ ë¹„êµí•œë‹¤.
- ===ë¥¼ ì˜¤ë²„ë¡œë”©í•  ìˆ˜ëŠ” ì—†ë‹¤.

### ğŸ”– 9.2.2 ìˆœì„œ ì—°ì‚°ì: compareTo (<, >, <=, >=)

```kotlin
class Person(val firstName: String, val lastName: String) : Comparable<Person> {
    override fun compareTo(other: Person): Int {
        return compareValuesBy(this, other, Person::lastName, Person::firstName)
    }
}

fun main() {
    val p1 = Person("Alice", "Smith")
    val p2 = Person("Bob", "Johnson")
    println(p1 < p2)
}
```

- ë¹„êµ ì—°ì‚°ìë¥¼ ì œê³µí•œë‹¤.
- `compareValuesBy`ëŠ” ë‘ ê°ì²´ì™€ ì—¬ëŸ¬ ë¹„êµ í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ëŠ”ë‹¤.
  - ì²« ë²ˆì§¸ ë¹„êµ í•¨ìˆ˜ì— ë‘ ê°ì²´ë¥¼ ë„˜ê²¨ ë‘ ê°ì²´ê°€ ê°™ì§€ ì•Šë‹¤ëŠ” ê²°ê³¼ê°€ ë‚˜ì˜¤ë©´ ê·¸ ê²°ê´ê°’ì„ ì¦‰ì‹œ ë°˜í™˜
- ë¹„êµ ì—°ì‚°ìë¥¼ ìë°” í´ë˜ìŠ¤ì— ëŒ€í•´ ì‚¬ìš©í•˜ê¸° ìœ„í•´ íŠ¹ë³„íˆ í™•ì¥ ë©”ì„œë“œë¥¼ ë§Œë“¤ê±°ë‚˜ í•  í•„ìš”ëŠ” ì—†ë‹¤.

## ğŸ“– 9.3 ì»¬ë ‰ì…˜ê³¼ ë²”ìœ„ì— ëŒ€í•´ ì“¸ ìˆ˜ ìˆëŠ” ê´€ë¡€

### ğŸ”– 9.3.1 ì¸ë±ìŠ¤ë¡œ ì›ì†Œ ì ‘ê·¼: getê³¼ set

```kotlin
operator fun Point.get(index: Int): Int {
    return when (index) {
        0 -> x
        1 -> y
        else ->
            throw IndexOutOfBoundsException("Invalid coordinate $index")
    }
}

fun main() {
    val p = Point(10, 20)
    println(p[1])
}
```

- get ë©”ì„œë“œì˜ íŒŒë¼ë¯¸í„°ë¡œ Intê°€ ì•„ë‹Œ íƒ€ì…ë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```kotlin
data class MutablePoint(var x: Int, var y: Int)

operator fun MutablePoint.set(index: Int, value: Int) {
    when (index) {
        0 -> x = value
        1 -> y = value
        else ->
            throw IndexOutOfBoundsException("Invalid coordinate $index")
    }
}

fun main() {
    val p = MutablePoint(10, 20)
    p[1] = 42
    println(p)
}
```

- setë„ ê´€ë¡€ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.

### ğŸ”– 9.3.2 ì–´ë–¤ ê°ì²´ê°€ ì»¬ë ‰ì…˜ì— ë“¤ì–´ìˆëŠ”ì§€ ê²€ì‚¬: in ê´€ë ˆ

```kotlin
data class Rectangle(val upperLeft: Point, val lowerRight: Point)

operator fun Rectangle.contains(p: Point): Boolean {
    return p.x in upperLeft.x..<lowerRight.x &&
            p.y in upperLeft.y..<lowerRight.y // ì—´ë¦° ë²”ìœ„
}

fun main() {
    val rect = Rectangle(Point(10, 20), Point(50, 50))
    println(Point(20, 30) in rect)
    println(Point(5, 5) in rect)
}
```

- ..< ì—°ì‚°ìë¥¼ ì“°ë©´ ì—´ë¦° ë²”ìœ„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
- in í•¨ìˆ˜ëŠ” contains ë©”ì„œë“œì˜ ìˆ˜ì‹  ê°ì²´ê°€ ë˜ê³  inì˜ ì™¼ìª½ì— ìˆëŠ” ê°ì²´ëŠ” contains ë©”ì„œë“œì— ì¸ìë¡œ ì „ë‹¬ëœë‹¤.

### ğŸ”– 9.3.3 ê°ì²´ë¡œë¶€í„° ë²”ìœ„ ë§Œë“¤ê¸°: rangeToì™€ rangeUntil ê´€ë ˆ

```kotlin
operator fun <T: Comparable<T>> T.rangeTo(other: T): ClosedRange<T>
```

- ì½”í‹€ë¦° í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ëŠ” ëª¨ë“  Comparable ê°ì²´ì— ëŒ€í•´ ì ìš© ê°€ëŠ¥í•œ rangeTo í•¨ìˆ˜ê°€ ë“¤ì–´ìˆë‹¤.

```kotlin
fun main() {
    val now = LocalDate.now()
    val vacation = now..now.plusDays(10)
    println(now.plusWeeks(1) in vacation)
}
```

- `now..now.plusDays(10)` ì‹ì€ ì»´íŒŒì¼ëŸ¬ì— ì˜í•´ `now.rangeTo(now.plusDays(10))`ìœ¼ë¡œ ë³€í™˜ëœë‹¤.
- rangeTo ì—°ì‚°ìëŠ” ë‹¤ë¥¸ ì‚°ìˆ  ì—°ì‚°ìë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë‚®ë‹¤.
  - í˜¼ë™ì„ í”¼í•˜ê¸° ìœ„í•´ ê´„í˜¸ë¥¼ ì“°ì!

```kotlin
fun main() {
    val n = 9
    (0..n).forEach { println(it) }
}
```

- ë²”ìœ„ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë ¤ë©´ ë²”ìœ„ë¥¼ ê´„í˜¸ë¡œ ë‘˜ëŸ¬ì‹¸ì•¼ í•œë‹¤.
- rangeUntil ì—°ì‚°ì(..<)>=ëŠ” ì—´ë¦° ë²”ìœ„ë¥¼ ë§Œë“ ë‹¤.

### ğŸ”– 9.3.4 ìì‹ ì˜ íƒ€ì…ì— ëŒ€í•´ ë£¨í”„ ìˆ˜í–‰: iterator ê´€ë¡€

```kotlin
operator fun CharSequence.iterator(): CharIterator
```

- ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ í•¨ìˆ˜ëŠ” ë¬¸ìì—´ì„ ì´í„°ë ˆì´ì…˜í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

```kotlin
operator fun ClosedRange<LocalDate>.iterator(): Iterator<LocalDate> =
    object : Iterator<LocalDate> {
        var current = start
        override fun hasNext(): Boolean =
            current <= endInclusive
        override fun next(): LocalDate {
            val thisDate = current
            current = current.plusDays(1)
            return thisDate
        }
    }

fun main() {
    val newYear = LocalDate.ofYearDay(2042, 1)
    val daysOff = newYear.minusDays(1)..newYear
    for (dayOff in daysOff) {
        println(dayOff)
    }
}
```

- `ClosedRange<LocalDate>`ì— ëŒ€í•œ í™•ì¥ í•¨ìˆ˜ iteratorë¥¼ ì •ì˜í–ˆê¸° ë•Œë¬¸ì— LocalDateì˜ ë²”ìœ„ ê°ì²´ë¥¼ for ë£¨í”„ì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

## ğŸ“– 9.4 component í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ êµ¬ì¡° ë¶„í•´ ì„ ì–¸ ì œê³µ

```kotlin
fun main() {
    val p = Point(10, 20)
    val (x, y) = p
    println(x)
    println(y)
}
```

- êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì€ ì¼ë°˜ ë³€ìˆ˜ ì„ ì–¸ê³¼ ë¹„ìŠ·í•´ ë³´ì¸ë‹¤.
- ë‚´ë¶€ì—ì„œ êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì˜ ê° ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•˜ê³ ì componentNì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.
  - Nì€ êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì— ìˆëŠ” ë³€ìˆ˜ ìœ„ì¹˜ì— ë”°ë¼ ë¶™ëŠ” ë²ˆí˜¸
- data classì˜ ì£¼ ìƒì„±ìì— ë“¤ì–´ìˆëŠ” í”„ë¡œí¼í‹°ì— ëŒ€í•´ì„œëŠ” ì»´íŒŒì¼ëŸ¬ê°€ ìë™ìœ¼ë¡œ componentN í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.

```kotlin
data class NameComponents(val name: String, val extension: String)

fun splitFileName(fullName: String): NameComponents {
    val result = fullName.split('.', limit = 2)
    return NameComponents(result[0], result[1])
}

fun main() {
    val (name, ext) = splitFileName("example.kt")
    println(name)
    println(ext)
}
```

- êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì„ ì‚¬ìš©í•´ ì—¬ëŸ¬ ê°’ ë°˜í™˜ì´ ê°€ëŠ¥í•˜ë‹¤.

```kotlin
data class NameComponents(val name: String, val extension: String)

fun splitFileName(fullName: String): NameComponents {
    val (name, extension) = fullName.split('.', limit = 2)
    return NameComponents(name, extension)
}
```

- ì»¬ë ‰ì…˜ì— ëŒ€í•´ êµ¬ì¡° ë¶„í•´ ì„ ì–¸ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.

### ğŸ”– 9.4.1 êµ¬ì¡° ë¶„í•´ ì„ ì–¸ê³¼ ë£¨í”„

```kotlin
fun printEntries(map: Map<String, String>) {
    for ((key, value) in map) {
        println("$key -> $value")
    }
}

fun main() {
    val map = mapOf("Oracle" to "Java", "JetBrains" to "Kotlin")
    printEntries(map)
}
```

- ë§µì— ëŒ€í•œ í™•ì¥ í•¨ìˆ˜ë¡œ iteratorê°€ ë“¤ì–´ìˆë‹¤.

```kotlin
    map.forEach { (key, value) -> println("$key -> $value") }
```

- ëŒë‹¤ê°€ êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì„ ì“¸ ìˆ˜ ìˆë‹¤.

### ğŸ”– 9.4.2 _ ë¬¸ìë¥¼ ì‚¬ìš©í•´ êµ¬ì¡° ë¶„í•´ ê°’ ë¬´ì‹œ

```kotlin
data class Person(val firstName: String, val lastName: String, val age: Int, val city: String)

fun introducePerson(p: Person) {
    val (firstName, lastName, age, city) = p
    println("This is $firstName, aged $age.")
}
```

- ì „ì²´ ê°ì²´ë¥¼ êµ¬ì¡° ë¶„í•´í•´ì•¼ë§Œ í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì—ì„œ ë’¤ìª½ì˜ êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì„ ì œê±°í•  ìˆ˜ëŠ” ì‡ë‹¤.

```kotlin
    val (firstName, lastName, age) = p
```

- lastNameì„ ê·¸ëƒ¥ ì—†ì•¨ ìˆ˜ëŠ” ì—†ë‹¤.

```kotlin
fun introducePerson(p: Person) {
    val (firstName, _, age) = p
    println("This is $firstName, aged $age.")
}
```

- `_` ë¥¼ ì“°ë©´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¬´ì‹œí•˜ê³  êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì´ ê°€ëŠ¥í•˜ë‹¤.

## ğŸ“– 9.5 í”„ë¡œí¼í‹° ì ‘ê·¼ì ë¡œì§ ì¬í™œìš©: ìœ„ì„ í”„ë¡œí¼í‹°

### ğŸ”– 9.5.1 ìœ„ì„ í”„ë¡œí¼í‹°ì˜ ê¸°ë³¸ ë¬¸ë²•ê³¼ ë‚´ë¶€ ë™ì‘

```kotlin
class Foo {
    var p = Type by Delegate()
}
```

- p í”„ë¡œí¼í‹°ëŠ” ì ‘ê·¼ì ë¡œì§ì„ ë‹¤ë¥¸ ê°ì²´ì— ìœ„ì„í•œë‹¤.

```kotlin
class Foo {
    private val delegate = Delegate()
    
    var p: Type
        set(value: Type) = delegate.setValue(/**/, value)
        get() = delegate.getValue(/**/)
}
```

- í”„ë¡œí¼í‹° ìœ„ì„ ê´€ë¡€ì— ë”°ë¼ Delegate í´ë˜ìŠ¤ëŠ” get, setì„ ì œê³µí•´ì•¼í•œë‹¤.
- by í‚¤ì›Œë“œëŠ” í”„ë¡œí¼í‹°ì™€ ìœ„ì„ê°ì²´ë¥¼ ì—°ê²°í•œë‹¤.

### ğŸ”– 9.5.2 ìœ„ì„ í”„ë¡œí¼í‹° ì‚¬ìš©: by lazy()ë¥¼ ì‚¬ìš©í•œ ì§€ì—° ì´ˆê¸°í™”

- ì§€ì—° ì´ˆê¸°í™”ëŠ” ê°ì²´ì˜ ì¼ë¶€ë¶„ì„ ì´ˆê¸°í™”í•˜ì§€ ì•Šê³  ë‚¨ê²¨ë’€ë‹¤ê°€ ì‹¤ì œë¡œ ê·¸ ë¶€ë¶„ì˜ ê°’ì´ í•„ìš”í•  ê²½ìš° ì´ˆê¸°í™”í•  ë•Œ ì“°ì´ëŠ” íŒ¨í„´

```kotlin
class Person(val name: String) {
    private var _emails: List<String>? = null

    val emails: List<String>
        get() {
            if (_emails == null) {
                _emails = loadEamils(this)
            }
            return _emails!!
        }
}


fun main() {
    val p = Person("Alice")
    p.emails
}
```

- ë’·ë°›ì¹¨í•˜ëŠ” í”„ë¡œí¼í‹° ê¸°ë²• ì‚¬ìš©
- í´ë˜ìŠ¤ ê°™ì€ ê°œë…ì„ í‘œí—Œí•˜ëŠ” í”„ë¡œí¼í‹°ê°€ 2ê°œ ìˆì„ ë•Œ ë¹„ê³µê°œ í”„ë¡œí¼í‹° ì•ì— ë°‘ì¤„ì„ ë¶™ì´ë©°, ê³µê°œ í”„ë¡œí¼í‹°ì—ëŠ” ì•„ë¬´ê²ƒë„ ë¶™ì´ì§€ ì•ŠëŠ”ë‹¤.

```kotlin
class Person(val name: String) {
    val emails by lazy { loadEmails(this) }
}
```

- ìœ„ì„ í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ë©´ í›¨ì”¬ ê°„ë‹¨í•´ì§„ë‹¤.
- lazy í•¨ìˆ˜ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ìŠ¤ë ˆë“œ ì•ˆì „í•˜ë‹¤.

### ğŸ”– 9.5.3 ìœ„ì„ í”„ë¡œí¼í‹° êµ¬í˜„

```kotlin
fun interface Observer {
    fun onChange(name: String, oldValue: Any?, newValue: Any?)
}

open class Observable {
    val observers = mutableListOf<Observer>()
    fun notifyObservers(propName: String, oldValue: Any?, newValue: Any?) {
        for (obs in observers) {
            obs.onChange(propName, oldValue, newValue)
        }
    }
}

class Person(val name: String, age: Int, salary: Int) : Observable() {
    var age: Int = age
        set(newValue) {
            val oldValue = field
            field = newValue
            notifyObservers("age", oldValue, newValue)
        }
    var salary: Int = salary
        set(newValue) {
            val oldValue = field
            field = newValue
            notifyObservers("salary", oldValue, newValue)
        }
}
```

- field í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ ageì™€ salary í”„ë¡œí¼í‹°ë¥¼ ë’·ë°›ì¹¨í•˜ëŠ” í•„ë“œì— ì ‘ê·¼í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤€ë‹¤.

```kotlin
class ObservableProperty(val propName: String, var propValue: Int, val observable: Observable) {
    fun getValue(): Int = propValue
    fun setValue(newValue: Int) {
        val oldValue = propValue
        propValue = newValue
        observable.notifyObservers(propName, oldValue, newValue)
    }
}

class Person(val name: String, age: Int, salary: Int) : Observable() {
    val _age = ObservableProperty("age", age, this)
    var age: Int
        get() = _age.getValue()
        set(value) {
            _age.setValue(value)
        }
    val _salary = ObservableProperty("salary", salary, this)
    var salary: Int
        get() = _salary.getValue()
        set(value) {
            _salary.setValue(value)
        }
}
```

- í”„ë¡œí¼í‹° ê°’ì„ ì €ì¥í•˜ê³  ê·¸ ê°’ì´ ë°”ë€Œë©´ ìë™ìœ¼ë¡œ ë³€ê²½ í†µì§€ë¥¼ ì „ë‹¬í•´ì£¼ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì—ˆë‹¤.
- ìœ„ì„ í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ë©´ ë” ê°„ë‹¨í•´ì§„ë‹¤.

```kotlin
class ObservableProperty(var propValue: Int, val observable: Observable) {
    operator fun getValue(thisRef: Any?, prop: KProperty<*>): Int = propValue
    operator fun setValue(thisRef: Any?, prop: KProperty<*>, newValue: Int) {
        val oldValue = propValue
        propValue = newValue
        observable.notifyObservers(prop.name, oldValue, newValue)
    }
}
```

- operator ë³€ê²½ìê°€ ë¶™ëŠ”ë‹¤.
- KProperty íƒ€ì…ì˜ ê°ì²´ë¥¼ ì‚¬ìš©í•´ í”„ë¡œí¼í‹° í‘œí˜„

```kotlin
class Person(val name: String, age: Int, salary: Int) : Observable() {
    val age by ObservableProperty(age, this)
    var salary by ObservableProperty(salary, this)
}
```

- ì—¬ëŸ¬ ì‘ì—…ì„ ì»´íŒŒì¼ëŸ¬ê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•´ì¤€ë‹¤.
- byì˜ ì˜¤ë¥¸ìª½ì— ìˆëŠ” ì‹ì´ ê¼­ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ í•„ìš”ëŠ” ì—†ë‹¤.

### ğŸ”– 9.5.4 ìœ„ì„ í”„ë¡œí¼í‹°ëŠ” ì»¤ìŠ¤í…€ ì ‘ê·¼ìê°€ ìˆëŠ” ê°ì¶°ì§„ í”„ë¡œí¼í‹°ë¡œ ë³€í™˜ëœë‹¤

```kotlin
class C {
    private val <delegate> = MyDelegate()
    
    var prop: Type
        get() = <delegate>.getValue(this, <property>)
        set(value: Type) = <delegate>.setValue(this, <property>, value)
}
```

- ì»´íŒŒì¼ëŸ¬ëŠ” ëª¨ë“  í”„ë¡œí¼í‹° ì ‘ê·¼ì ì•ˆì— getValue, setValue í˜¸ì¶œ ì½”ë“œë¥¼ ìƒì„±í•´ì¤€ë‹¤.
- í”„ë¡œí¼í‹° ê°’ì´ ì €ì¥ë  ì¥ì†Œë¥¼ ë°”ê¿€ ìˆ˜ë„ ìˆê³  í”„ë¡œí¼í‹°ë¥¼ ì½ê±°ë‚˜ ì“¸ ë•Œ ë²Œì–´ì§ˆ ì¼ì„ ë³€ê²½í•  ìˆ˜ë„ ìˆë‹¤.

### ğŸ”– 9.5.5 ë§µì— ìœ„ì„í•´ì„œ ë™ì ìœ¼ë¡œ ì• íŠ¸ë¦¬ë·°íŠ¸ ì ‘ê·¼

```kotlin
class Person {
    private val _attributes = mutableMapOf<String, String>()

    fun setAttribute(attrName: String, value: String) {
        _attributes[attrName] = value
    }

    var name: String
        get() = _attributes["name"]!!
        set(value) {
            _attributes["name"] = value
        }
}
```

- ìœ„ì„ í”„ë¡œí¼í‹°ë¥¼ í™œìš©í•˜ë„ë¡ ë³€ê²½í•˜ëŠ” ê²ƒì€ ì•„ì£¼ ì‰½ë‹¤.

```kotlin
class Person {
    private val _attributes = mutableMapOf<String, String>()

    fun setAttribute(attrName: String, value: String) {
        _attributes[attrName] = value
    }

    var name: String by _attributes
}
```

- Mapì— ëŒ€í•´ getValue, setValue í™•ì¥ í•¨ìˆ˜ë¥¼ ì œê³µí•˜ê¸°ì— ë™ì‘í•¨.
- getValueì—ì„œ ë§µì— í”„ë¡œí¼í‹° ê°’ì„ ì €ì¥í•  ë•ŒëŠ” ìë™ìœ¼ë¡œ í”„ë¡œí¼í‹° ì´ë¦„ì„ í‚¤ë¡œ í™œìš©

### ğŸ”– 9.5.6 ì‹¤ì „ í”„ë ˆì„ì›Œí¬ê°€ ìœ„ì„ í”„ë¡œí¼í‹°ë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•

- ìœ„ì„ í”„ë¡œí¼í‹°ëŠ” í”„ë¡œí¼í‹°ì˜ ì ‘ê·¼ ë¡œì§ì„ ì¬ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ì–´, ì½”ë“œì˜ ì¤‘ë³µì„ ì¤„ì´ê³  ìœ ì§€ë³´ìˆ˜ì„±ì„ í–¥ìƒì‹œí‚¨ë‹¤.
- í”„ë ˆì„ì›Œí¬ë‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ê³µí†µëœ í”„ë¡œí¼í‹° ë™ì‘ì„ ìº¡ìŠí™”í•˜ì—¬, ì‚¬ìš©ì ì½”ë“œì˜ ê°„ê²°í•¨ê³¼ ì¼ê´€ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.
