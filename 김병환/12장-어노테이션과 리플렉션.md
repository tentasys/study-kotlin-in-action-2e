# π“ 12μ¥ μ–΄λ…Έν…μ΄μ…κ³Ό λ¦¬ν”λ ‰μ…

## π“– 12.1 μ–΄λ…Έν…μ΄μ… μ„ μ–Έκ³Ό μ μ©

### π”– 12.1.1 μ–΄λ…Έν…μ΄μ…μ„ μ μ©ν•΄ μ„ μ–Έν•΄ ν‘μ§€ λ‚¨κΈ°κΈ°

- μ½”ν‹€λ¦°μ—μ„ μ–΄λ…Έν…μ΄μ…μ„ μ μ©ν•λ ¤λ©΄ @μ™€ μ–΄λ…Έν…μ΄μ… μ΄λ¦„μ„ μ„ μ–Έ μ•μ— λ„£μΌλ©΄ λλ‹¤.

```kotlin
@Deprecated("Use removeAt(index) instead.", ReplaceWith("removeAt(index)"))
fun remove(index: Int) {
}
```

- `@Deprecated` μ–΄λ…Έν…μ΄μ…μ€ μµλ€ 3κ°€μ§€ νλΌλ―Έν„°λ¥Ό λ°›λ”λ‹¤.
    - `message`: μ‚¬μ©μ¤‘λ‹¨ μκ³  μ΄μ 
    - `replaceWith`: μ› λ²„μ „μ„ λ€μ‹ ν•  μ μλ” ν¨ν„΄ μ μ‹
    - `level`: μ μ§„μ μΈ μ‚¬μ© μ¤‘λ‹¨μ„ μ§€μ› μ κ³µ
        - `WARNING`: κ²½κ³ λ§ ν•¨
        - `ERROR`: μ»΄νμΌλμ§€ λ»ν•κ² λ§‰μ.
        - `HIDDEN`: μ»΄νμΌλμ§€ λ»ν•κ² λ§‰μΌλ©°, μμ „μ— μ»΄νμΌλ μ½”λ“μ™€μ μ΄μ§„νΈν™μ„±λ§ μ μ§€
- μ½”ν‹€λ¦°μ—μ„ μ–΄λ…Έν…μ΄μ… μΈμλ¥Ό μ§€μ •ν•λ” λ¬Έλ²•μ€ μλ°”μ™€ μ•½κ°„ λ‹¤λ¥΄λ‹¤.
    - ν΄λμ¤λ¥Ό μ–΄λ…Έν…μ΄μ… μΈμλ΅ μ§€μ •: `::class`λ¥Ό ν΄λμ¤ μ΄λ¦„ λ’¤μ— λ„£μ–΄μ•Ό ν•λ‹¤.
    - λ‹¤λ¥Έ μ–΄λ…Έν…μ΄μ…μ„ μΈμλ΅ μ§€μ •: μΈμλ΅ λ“¤μ–΄κ°€λ” μ–΄λ…Έν…μ΄μ…μ μ΄λ¦„ μ•μ— `@`λ¥Ό λ„£μ§€ λ§λΌ.
    - λ°°μ—΄μ„ μΈμλ΅ μ§€μ •: κ°κ΄„νΈ(`[]`)λ¥Ό μ‚¬μ©, `arrayOf` ν•¨μ μ‚¬μ©
- μ–΄λ…Έν…μ΄μ… μΈμλ¥Ό μ»΄νμΌ μ‹μ μ— μ• μ μμ–΄μ•Ό ν•λ‹¤.
    - μ¦‰, μ„μμ ν”„λ΅νΌν‹°λ¥Ό μΈμλ΅ μ§€μ •ν•  μλ” μ—†λ‹¤.
    - ν”„λ΅νΌν‹°λ¥Ό μΈμλ΅ μ‚¬μ©ν•λ ¤λ©΄ const λ³€κ²½μλ¥Ό λ¶™μ—¬μ•Ό ν•λ‹¤.

### π”– 12.1.2 μ–΄λ…Έν…μ΄μ…μ΄ μ°Έμ΅°ν•  μ μλ” μ •ν™•ν• μ„ μ–Έ μ§€μ •: μ–΄λ…Έν…μ΄μ… νƒ€κΉƒ

- **μ‚¬μ© μ§€μ  νƒ€κΉƒ** μ„ μ–Έμ€ ν†µν•΄ μ–΄λ…Έν…μ΄μ…μ„ λ¶™μΌ μ”μ†λ¥Ό μ •ν•  μ μλ‹¤.
    - @ κΈ°νΈμ™€ μ–΄λ…Έν…μ΄μ… μ΄λ¦„ μ‚¬μ΄μ— λ¶™μΌλ©° μ–΄λ…Έν…μ΄μ… μ΄λ¦„κ³Όλ” μ½λ΅ μΌλ΅ λ¶„λ¦¬λλ‹¤.
    - `@get:JvmName("obtainCertificate")`

```kotlin
@JvmName("performCalculation")
fun calculate(): Int {
    return (2 + 2) - 1
}
```

- `calculate` ν•¨μλ¥Ό μλ°” μ½μ—μ„ `performCalculation()`λ΅ νΈμ¶ν•κ² ν•λ‹¤.

```kotlin
class CertificateManager {
    @get:JvmName("obtainCertificate")
    @set:JvmName("putCertificate")
    var certificate: String = "-----BEGIN CERTIFICATE-----"
}
```

- `certificate` ν”„λ΅νΌν‹°λ¥Ό `obtainCertificate`, `putCertificate` λΌλ” μ΄λ¦„μΌλ΅ μ‚¬μ©ν•  μ μλ‹¤.

μ‚¬μ© μ§€μ  νƒ€κΉƒμ„ μ§€μ •ν•  λ• μ§€μ›ν•λ” νƒ€κΉƒ λ©λ΅

- property: ν”„λ΅νΌν‹° μ „μ²΄
- field: ν”„λ΅νΌν‹°μ— μν•΄ μƒμ„±λλ” ν•„λ“
- get: ν”„λ΅νΌν‹° κ²ν„°
- set: ν”„λ΅νΌν‹° μ„Έν„°
- receiver: ν™•μ¥ ν•¨μλ‚ ν”„λ΅νΌν‹°μ μμ‹  κ°μ²΄ νλΌλ―Έν„°
- param: μƒμ„±μ νλΌλ―Έν„°
- setparam: μ„Έν„° νλΌλ―Έν„°
- delegate: μ„μ„ ν”„λ΅νΌν‹°μ μ„μ„ μΈμ¤ν„΄μ¤λ¥Ό λ‹΄μ•„λ‘” ν•„λ“
- file: νμΌ μ•μ— μ„ μ–Έλ μµμƒμ„ ν•¨μμ™€ ν”„λ΅νΌν‹°λ¥Ό λ‹΄μ•„λ‘λ” ν΄λμ¤

μ½”ν‹€λ¦°μ—λ” μ»΄νμΌλ¬ κ²½κ³ λ¥Ό λ¬΄μ‹ν•κΈ° μ„ν• `@Suppress` μ–΄λ…Έν…μ΄μ…μ΄ μλ‹¤.

### π”– 12.1.3 μ–΄λ…Έν…μ΄μ…μ„ ν™μ©ν•΄ JSON μ§λ ¬ν™” μ μ–΄

- μ§λ ¬ν™”λ” κ°μ²΄λ¥Ό μ €μ¥ μ¥μΉμ— μ €μ¥ν•κ±°λ‚ λ„¤νΈμ›ν¬λ¥Ό ν†µν•΄ μ „μ†΅ν•κΈ° μ„ν•΄ ν…μ¤νΈλ‚ μ΄μ§„ ν•μ‹μΌλ΅ λ³€ν™ν•λ” κ²ƒ
- μ—­μ§λ ¬ν™”λ” ν…μ¤νΈλ‚ μ΄μ§„ ν•μ‹μΌλ΅ μ €μ¥λ λ°μ΄ν„°μ—μ„ μ›λμ κ°μ²΄λ¥Ό λ§λ“¤μ–΄λ‚Έλ‹¤.

```kotlin
data class Person(val name: String, val age: Int)

fun main() {
    val person = Person("Alice", 29)
    println(serialize(person))
}
```

- Person μΈμ¤ν„΄μ¤λ¥Ό serialize ν•¨μμ— μ „λ‹¬ν•λ©΄ JSON ν‘ν„μ΄ λ‹΄κΈ΄ λ¬Έμμ—΄μ„ λλ ¤λ°›λ”λ‹¤.

```kotlin
fun main() {
    val json = """{"name": "Alice", "age": 29"}"""
    println(deserialize<Person>(json))
}
```

-
- JSON ν‘ν„μ„ λ‹¤μ‹ μ½”ν‹€λ¦° κ°μ²΄λ΅ λ§λ“¤λ ¤λ©΄ deserialize ν•¨μλ¥Ό νΈμ¶ν•λ‹¤.

```kotlin
data class Person(
    @JsonName("alias") val firstName: String,
    @JsonExclude val age: Int? = null
)
```

- `@JsonExclude` μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•λ©΄ μ§λ ¬ν™”λ‚ μ—­μ§λ ¬ν™”ν•  λ• λ¬΄μ‹ν•΄μ•Ό ν•λ” ν”„λ΅νΌν‹°λ¥Ό ν‘μ‹ν•  μ μλ‹¤.
    - κΈ°λ³Έκ°’ μ§€μ • ν•„μ”
- `@JsonName` μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•λ©΄ ν”„λ΅νΌν‹°λ¥Ό ν‘ν„ν•λ” ν‚¤/κ°’ μμ ν‚¤λ΅ ν”„λ΅νΌν‹° μ΄λ¦„ λ€μ‹  μ–΄λ…Έν…μ΄μ…μ΄ μ§€μ •ν• λ¬Έμμ—΄μ„ μ“°κ² ν•  μ μλ‹¤.

### π”– 12.1.4 μ–΄λ…Έν…μ΄μ… μ„ μ–Έ

```kotlin
annotation class JsonExclude
```

- μ–΄λ…Έν…μ΄μ… ν΄λμ¤λ” μ„ μ–Έμ΄λ‚ μ‹κ³Ό κ΄€λ ¨ μλ” λ©”νƒ€λ°μ΄ν„°μ κµ¬μ΅°λ§ μ •μν•κΈ° λ•λ¬Έμ— λ‚΄λ¶€μ— μ•„λ¬΄ μ½”λ“λ„ λ“¤μ–΄μμ„ μ μ—†λ‹¤.
    - μ»΄νμΌλ¬λ” μ–΄λ…Έν…μ΄μ… ν΄λμ¤μ—μ„λ³Έλ¬Έμ„ μ •μν•μ§€ λ»ν•κ² λ§‰λ”λ‹¤.

```kotlin
annotation class JsonName(val name: String)
```

- νλΌλ―Έν„°κ°€ μλ” μ–΄λ…Έν…μ΄μ…μ„ μ •μν•λ ¤λ©΄ μ–΄λ…Έν…μ΄μ… ν΄λμ¤μ μ£Ό μƒμ„±μμ— νλΌλ―Έν„°λ¥Ό μ„ μ–Έν•΄μ•Ό ν•λ‹¤.
- μ£Ό μƒμ„±μ κµ¬λ¬Έμ„ μ‚¬μ©ν•λ©°, `val`λ΅ μ„ μ–Έ

### π”– 12.1.5 λ©”νƒ€μ–΄λ…Έν…μ΄μ…: μ–΄λ…Έν…μ΄μ…μ„ μ²λ¦¬ν•λ” λ°©λ²• μ μ–΄

- λ©”νƒ€μ–΄λ…Έν…μ΄μ…: μ–΄λ…Έν…μ΄μ… ν΄λμ¤μ— μ μ©ν•  μ μλ” μ–΄λ…Έν…μ΄μ…

```kotlin
@Target(AnnotationTarget.PROPERTY)
annotation class JsonExclude
```

- `@Target` λ©”νƒ€μ–΄λ…Έν…μ΄μ…μ€ μ–΄λ…Έν…μ΄μ…μ„ μ μ©ν•  μ μλ” μ”μ†μ μ ν•μ„ μ§€μ •
- μ–΄λ…Έν…μ΄μ… ν΄λμ¤μ— λ€ν•΄ κµ¬μ²΄μ μΈ `@Target`μ„ μ§€μ •ν•μ§€ μ•μΌλ©΄ λ¨λ“  μ„ μ–Έμ— μ μ©ν•  μ μλ” μ–΄λ…Έν…μ΄μ…μ΄ λλ‹¤.

```kotlin
@Target(AnnotationTarget.ANNOTATION_CLASS)
annotation class BindingAnnotation

@BindingAnnotation
annotation class MyBinding
```

- λ©”νƒ€μ–΄λ…Έν…μ΄μ…μ„ μ§μ ‘ λ§λ“¤μ–΄μ•Ό ν•λ‹¤λ©΄ `ANNOTATION_CLASS`λ¥Ό νƒ€κΉƒμΌλ΅ μ§€μ •ν•μ.

### π”– 12.1.6 μ–΄λ…Έν…μ΄μ… νλΌλ―Έν„°λ΅ ν΄λμ¤ μ‚¬μ©

```kotlin
interface Company {
    val name: String
}

data class CompanyImpl(override val name: String) : Company

data class Person(
    val name: String,
    @DeserializeInterface(CompanyImpl::class) val company: Company
)
```

- `@DeserializeInterface`λ” μΈν„°νμ΄μ¤ νƒ€μ…μΈ ν”„λ΅νΌν‹°μ— λ€ν• μ—­μ§λ ¬ν™”λ¥Ό μ μ–΄ν•  λ• μ“°λ” μ–΄λ…Έν…μ΄μ…μ΄λ‹¤.

```kotlin
annotation class DeserializeInterface(val targetClass: KClass<out Any>)
```

- ν΄λμ¤ μ°Έμ΅°λ¥Ό μΈμλ΅ λ°›λ” μ–΄λ…Έν…μ΄μ…μ€ μ„μ™€ κ°™μ΄ μ •μν•λ‹¤.

### π”– 12.1.7 μ–΄λ…Έν…μ΄μ… νλΌλ―Έν„°λ΅ μ λ„¤λ¦­ ν΄λμ¤ λ°›κΈ°

- κΈ°λ³Έμ μΌλ΅ μ μ΄ν‚¤λ“λ” κΈ°λ³Έ νƒ€μ…μ΄ μ•„λ‹ ν”„λ΅νΌν‹°λ¥Ό λ‚΄ν¬λ κ°μ²΄λ΅ μ§λ ¬ν™”ν•λ‹¤.
    - μ΄λ° κΈ°λ³Έ λ™μ‘μ„ λ³€κ²½ν•κ³  μ‹¶μΌλ©΄ κ°’μ„ μ§λ ¬ν™”ν•λ” λ΅μ§μ„ μ§μ ‘ μ κ³µν•λ©΄ λλ‹¤.

```kotlin
interface ValueSerializer<T> {
    fun toJsonValue(value: T): Any?
    fun fromJsonValue(jsonValue: Any?): T
}
```

- μ΄ μΈν„°νμ΄μ¤λ” μ½”ν‹€λ¦° κ°μ²΄μ—μ„ JSON ν‘ν„μΌλ΅μ λ³€ν™μ„ μ κ³µν•λ©°, λ°λ€μ κ²½μ°λ„ μ κ³µν•λ‹¤.

```kotlin
data class Person(
    val name: String,
    @CustomSerializer(DateSerializer::class) val birthDate: Date
)
```

```kotlin
annotation class CustomSerializer(val serializerClass: KClass<out ValueSerializer<*>>)
```

- ν΄λμ¤λ¥Ό μ–΄λ…Έν…μ΄μ… μΈμλ΅ λ°›μ•„μ•Ό ν•  λ•λ§λ‹¤ κ°™μ€ ν¨ν„΄ μ‚¬μ©μ΄ κ°€λ¥ν•λ‹¤.
    - `KClass<out μμ‹ μ ν΄λμ¤ μ΄λ¦„>`
- μμ‹ μ ν΄λμ¤ μ΄λ¦„ μμ²΄κ°€ νƒ€μ… μΈμλ¥Ό λ°›μ•„μ•Ό ν•λ‹¤λ©΄ `KClass<out μμ‹ μ ν΄λμ¤ μ΄λ¦„<*>>` μ²λΌ νƒ€μ…μΈμλ¥Ό *λ΅ λ°”κΎΌλ‹¤.

## π“– 12.2 λ¦¬ν”λ ‰μ…: μ‹¤ν–‰ μ‹μ μ— μ½”ν‹€λ¦° κ°μ²΄ λ‚΄λ¶€ κ΄€μ°°

- λ¦¬ν”λ ‰μ…μ€ μ‹¤ν–‰ μ‹μ μ— κ°μ²΄μ ν”„λ΅νΌν‹°μ™€ λ©”μ„λ“μ— μ ‘κ·Όν•  μ μκ² ν•΄μ£Όλ” λ°©λ²•

### π”– 12.2.1 μ½”ν‹€λ¦° λ¦¬ν”λ ‰μ… API: KClass, KCallable, KFunction, KProperty

```kotlin
interface KClass<T : Any> {
    val simpleName: String?
    val qualifiedName: String?
    val members: Collection<KCallable<*>>
    val constructors: Collection<KFunction<T>>
    val nestedClasses: Collection<KClass<*>>
    // ...
}
```

- `KClass` μ„ μ–Έμ„ μ°Ύμ•„λ³΄λ©΄ ν΄λμ¤ λ‚΄λ¶€λ¥Ό μ‚΄ν΄λ³Ό λ• μ‚¬μ©ν•  μ μλ” λ‹¤μ–‘ν•κ³  μ μ©ν• λ©”μ„λ“λ¥Ό λ³Ό μ μλ‹¤.

```kotlin
interface KCallable<out R> {
    fun call(vararg args: Any?): R
    // ...
}
```

- `KCallableμ€` ν•¨μμ™€ ν”„λ΅νΌν‹°λ¥Ό μ•„μ°λ¥΄λ” κ³µν†µ μƒμ„ μΈν„°νμ΄μ¤λ‹¤.
- `call`μ„ μ‚¬μ©ν•  λ•λ” ν•¨μ μΈμλ¥Ό `vararg` λ¦¬μ¤νΈλ΅ μ „λ‹¬

```kotlin
fun foo(x: Int) = println(x)

fun main() {
    val kFunction = ::foo
    kFunction.call(42)
}
```

- `::foo` μ‹μ κ°’ νƒ€μ…μ΄ `KCallable` ν΄λμ¤μ μΈμ¤ν„΄μ¤μ΄λ‹¤.

```kotlin
fun sum(x: Int, y: Int) = x + y

fun main() {
    val kFunction = KFunction2<Int, Int, Int> = ::sum
    println(kFunction.invoke(1, 2) + kFunction.invoke(3, 4))
    kFunction(1)
    // error
}
```

- invoke λ©”μ„λ“λ¥Ό νΈμ¶ν•  λ•λ” μΈμ κ°μλ‚ νƒ€μ…μ„ μ‹¤μλ΅ ν‹€λ¦΄ μ μ—†λ‹¤. μ»΄νμΌμ΄ μ•λκΈ° λ•λ¬Έ

```kotlin
var counter = 0

fun main() {
    val kProperty = ::counter
    kProperty.setter.call(21)
    println(kProperty.get())
}
```

- μµμƒμ„ μ½κΈ° μ „μ©κ³Ό κ°€λ³€ ν”„λ΅νΌν‹°λ” κ°κ° `KProperty0`μ΄λ‚, `KMutableProperty0` μΈν„°νμ΄μ¤μ μΈμ¤ν„΄μ¤λ΅ ν‘ν„
    - μΈμ μ—†λ” get method μ κ³µ
- `KProperty1`μ€ μ λ„¤λ¦­ ν΄λμ¤μ΄λ‹¤.

### π”– 12.2.2 λ¦¬ν”λ ‰μ…μ„ μ‚¬μ©ν•΄ κ°μ²΄ μ§λ ¬ν™” κµ¬ν„

```kotlin
fun serialize(obj: Any): String
```

- μ μ΄ν‚¤λ“μ μ§λ ¬ν™” ν•¨μ μ„ μ–Έμ΄λ‹¤.
- μ΄ ν•¨μλ” κ²°κ³Ό JSONμ„ `StringBuilder` μΈμ¤ν„΄μ¤ μ•μ— κµ¬μ¶•ν•λ‹¤.

```kotlin
private fun StringBuilder.serializeObject(x: Any) {
    append(/*...*/)
}
```

- λ³„λ„λ΅ μμ‹  κ°μ²΄λ¥Ό μ§€μ •ν•μ§€ μ•κ³  append λ©”μ„λ“λ¥Ό νΈν•κ² μ‚¬μ©ν•  μ μλ‹¤.

```kotlin
fun serialize(obj: Any): String = buildString { serializeObject(obj) }
```

- λ€λ¶€λ¶„μ μ‘μ—…μ„ `serializeObject`μ— μ„μ„ν•λ‹¤.

```kotlin
private fun StringBuilder.serializeObject(obj: Any) {
    val kClass = obj::class as KClass<Any>
    val properties = kClass.memberProperties

    properties.joinToStringBuilder(
        this, prefix = "{", postfix = "}"
    ) { prop ->
        serializeString(prop.name)
        append(": ")
        serializePropertyValue(prop.get(obj))
    }
}
```

- ν΄λμ¤μ κ° ν”„λ΅νΌν‹°λ¥Ό μ°¨λ΅€λ΅ μ§λ ¬ν™” ν•λ‹¤.

### π”– 12.2.3 μ–΄λ…Έν…μ΄μ…μ„ ν™μ©ν•΄ μ§λ ¬ν™” μ μ–΄

μ–΄λ…Έν…μ΄μ…μ„ μ§€μ›ν•κΈ° μ„ν•΄ `serializeObject`λ¥Ό μ–΄λ–»κ² μμ •ν• μ§€ μ•μ•„λ³Έλ‹¤.

```kotlin
val properties = kClass.memberProperties.filter { it.findAnnotation<JsonExclude>() == null }
```

- μ„μ™€ κ°™μ΄ `@JsonExclude` μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ§€ μ•μ€ ν”„λ΅νΌν‹°λ§ λ‚¨κΈΈ μ μλ‹¤.

```kotlin
val jsonNameAnn = prop.findAnnotation<JsonName>()
val propName = jsonNameAnn?.name ?: prop.name
```

- μ–΄λ…Έν…μ΄μ…μ— μ „λ‹¬ν• μΈμλ„ μ•μ•„μ•Ό ν•λ‹¤.

```kotlin
private fun StringBuilder.serializeObject(obj: Any) {
    (obj::class as KClass<Any>)
        .memberProperties
        .filter { it.findAnnotation<JsonExclude>() == null }
        .joinToStringBuilder(this, prefix = "{", postfix = "}") {
            serializeProperty(it, obj)
        }
}
```

- `@JsonExclude` μ–΄λ…Έν…μ΄μ…ν• ν”„λ΅νΌν‹°λ¥Ό μ μ™Έμ‹ν‚¨λ‹¤.

```kotlin
private fun StringBuilder.serializeObject(prop: KProperty1<Any, *>, obj: Any) {
    val jsonNameAnn = prop.findAnnotation<JsonName>()
    val propName = jsonNameAnn?.name ?: prop.name
    serializeString(propName)
    append(": ")
    serializePropertyValue(prop.get(obj))
}
```

- `@JsonName`μ— λ”°λΌ ν”„λ΅νΌν‹° μ΄λ¦„μ„ μ²λ¦¬ν•λ‹¤.

```kotlin
fun KProperty<*>.getSerializer(): ValueSerializer<Any?>? {
    val customSerializerAnn = findAnnotation<CustomSerializer>() ?: return null
    val serializerClass = customSerializerAnn.serializerClass

    val valueSerializer = serializerClass.objectInstance
        ?: serializerClass.createInstance()
    @Suppress("UNCHECKED_CAST")
    return valueSerializer as ValueSerializer<Any?>
}
```

- ν”„λ΅νΌν‹°μ κ°’μ„ μ§λ ¬ν™”ν•λ” μ§λ ¬ν™”κΈ° κ°€μ Έμ¤κΈ°

```kotlin
private fun StringBuilder.serializeProperty(
    prop: KProperty1<Any, *>, obj: Any
) {
    val jsonNameAnn = prop.findAnnotation<JsonName>()
    val propName = jsonNameAnn?.name ?: prop.name
    serializeString(propName)
    append(": ")

    val value = prop.get(obj)
    val jsonValue = prop.getSerializer()?.toJsonValue(value) ?: value
    serializePropertyValue(jsonValue)
}
```

- `serializeProperty` κµ¬ν„ μ•μ—μ„ `getSerializer`λ¥Ό μ‚¬μ©ν•  μ μλ‹¤.

### π”– 12.2.4 JSON νμ‹±κ³Ό κ°μ²΄ μ—­μ§λ ¬ν™”

- μ μ΄ν‚¤λ“μ JSON μ—­μ§λ ¬ν™”κΈ°λ” 3λ‹¨κ³„λ΅ κµ¬ν„λΌ μλ‹¤.
    1. μ–΄ν λ¶„μ„κΈ°(λ ‰μ„)
        - ν† ν°μ λ¦¬μ¤νΈλ΅ λ³€ν™(λ¬Έμν† ν°, κ°’ ν† ν°)
    2. λ¬Έλ²• λ¶„μ„κΈ°(νμ„)
        - ν† ν°μ λ¦¬μ¤νΈλ¥Ό κµ¬μ΅°ν™”λ ν‘ν„μΌλ΅ λ³€ν™
    3. μ—­μ§λ ¬ν™” μ»΄ν¬λ„νΈ
        - ν•„μ”ν• ν΄λμ¤μ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•΄ λ°ν™

### π”– 12.2.5 μµμΆ… μ—­μ§λ ¬ν™” λ‹¨κ³„: callBy()μ™€ λ¦¬ν”λ ‰μ…μ„ μ‚¬μ©ν•΄ κ°μ²΄ λ§λ“¤κΈ°

```kotlin
interface KCallable<out R> {
    fun callBy(args: Map<KParameter, Any?>): R
    // ...
}
```

- `KCallable.call`μ€ λ””ν΄νΈ νλΌλ―Έν„° κ°’μ„ μ§€μ›ν•μ§€ μ•λ”λ‹¤.
- `KCallable.callBy`λ” λ””ν΄νΈ νλΌλ―Έν„° κ°’μ„ μ§€μ›ν•λ‹¤.

```kotlin
object BooleanSerializer : ValueSerializer<Boolean> {
    override fun fromJsonValue(jsonValue: Any?): Boolean {
        if (jsonValue !is Boolean) throw JkidException("Boolean Expected")
            return jsonValue
    }
    override fun toJsonValue(value: Boolean) = value
}
```

- Boolean κ°’μ„ μ„ν• μ§λ ¬ν™”κΈ°

```kotlin
class ClassInfoCache {
    private val cacheData = mutableMapOf<KClass<*>, ClassInfo<*>>()

    @Suppress("UNCHECKED_CAST")
    operator fun <T : Any> get(cls: KClass<T>): ClassInfo<T> =
        cacheData.getOrPut(cls) { ClassInfo(cls) } as ClassInfo<T>
}
```

- λ¦¬ν”λ ‰μ… λ°μ΄ν„° μΊμ‹ μ €μ¥μ†
- μ„±λ¥μ„ μ„ν•΄ κ²€μƒ‰ κ²°κ³Όλ¥Ό μΊμ‹μ— λ„£μ–΄λ‘”λ‹¤.