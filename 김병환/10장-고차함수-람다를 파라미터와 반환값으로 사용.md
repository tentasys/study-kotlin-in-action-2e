# ğŸ“š 10ì¥ ê³ ì°¨ í•¨ìˆ˜: ëŒë‹¤ë¥¼ íŒŒë¼ë¯¸í„°ì™€ ë°˜í™˜ê°’ìœ¼ë¡œ ì‚¬ìš©

## ğŸ“– 10.1 ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ê±°ë‚˜ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ ì •ì˜: ê³ ì°¨ í•¨ìˆ˜

- ê³ ì°¨ í• ìˆ˜ëŠ” ë‹¤ë¥¸ í• ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ê±°ë‚˜ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” í•©ìˆ˜
- ì½”ë¬¼ë¦°ì—ì„œëŠ” ë‹¤ë‚˜ í• ìˆ˜ ì°¸ì¡°ë¥¼ ì‚¬ìš©í•´ í•¨ìˆ˜ë¥¼ ê°’ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.

```kotlin
list.filter { it > 0}
```

- í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ í•¨ìˆ˜ì¸ filterëŠ” ìˆ ì–´ í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ìœ¼ë¯€ë¡œ ê³ ì°¨ í•¨ìˆ˜

### ğŸ”– 10.1.1 í•¨ìˆ˜ íƒ€ì…ì€ ëŒë‹¤ì˜ íŒŒë¼ë¯¸í„° íƒ€ì…ê³¼ ë°˜í™˜ íƒ€ì…ì„ ì§€ì •í•œë‹¤

```kotlin
val sum = { x: Int, y: Int -> x + y }
val action = { println(42) }
```

- ì»´íŒŒì¼ëŸ¬ëŠ” sumê³¼ actionì´ í•¨ìˆ˜ íƒ€ì…ì„ì„ ì¶”ë¡ 

```kotlin
val sum: (Int, Int) -> Int = { x, y -> x + y } // Int íŒŒë¼ë¯¸í„°ë¥¼ 2ê°œ ë°›ì•„ì„œ Int ê°’ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
val action: () -> Unit = { println(42) } // ì•„ë¬´ ì¸ìë„ ë°›ì§€ ì•Šê³  ì•„ë¬´ ê°’ë„ ë°˜í™˜í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜
```

- í•¨ìˆ˜ íƒ€ì…ì„ ì •ì˜í•˜ë ¤ë©´ í•¨ìˆ˜ íŒŒë¼ë¯¸í„°ì˜ íƒ€ì…ì„ íŒ”í˜¸ ì•ˆì— ë„£ê³  ê·¸ ë’¤ì— í™”ì‚´í‘œ(->)ë¥¼ ì¶”ê°€í•œ ë‹¤ìŒ, í•¨ìˆ˜ì˜ ë°˜í™˜ íƒ€ì…ì„ ì§€ì •

```kotlin
var canReturnNu11: (Int, Int) -> Int? = { x, y -> null }
```

- ë‹¤ë¥¸ í•¨ìˆ˜ì™€ ë§ˆì°¬ê°€ì§€ë¡œ í•¨ìˆ˜ íƒ€ì…ì—ì„œë„ ë°˜í™˜ íƒ€ì…ì„ ë„ì´ ë  ìˆ˜ ìˆëŠ” íƒ€ì…ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.

```kotlin
var funOrNull: ((Int, Int) -> Int)? = null
```

- í•¨ìˆ˜ ì „ì²´ê°€ ë„ì´ ë  ìˆ˜ ìˆëŠ” íƒ€ì…ì„ì„ ì„ ì–¸í•˜ê¸° ìœ„í•´ í•¨ìˆ˜ íƒ€ì…ì„ ê´„í˜¸ë¡œ ê°ì‹¸ê³  ê·¸ ë’¤ì— ë¬¼ìŒí‘œë¥¼ ë¶™ì—¬ì•¼ë§Œ í•œë‹¤.

### ğŸ”– 10.1.2 ì¸ìë¡œ ì „ë‹¬ ë°›ì€ í•¨ìˆ˜ í˜¸ì¶œ

```kotlin
fun twoAndThree(operation: (Int, Int) -> Int) {
    val result = operation(2, 3)
    println("The result is $result")
}

fun main() {
    twoAndThree { a, b -> a + b }
    // The result is 5
    twoAndThree { a, b -> a * b }
    // The result is 6
}
```

- ì¸ìë¡œ ë°›ì€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” êµ¬ë¬¸ì€ ì¼ë°˜í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” êµ¬ë¬¸ê³¼ ê°™ë‹¤.
- í•¨ìˆ˜ íƒ€ì…ì—ì„œ íŒŒë¼ë¯¸í„° ì´ë¦„ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.

```kotlin
fun String.filter(predicate: (Char) -> Boolean): String {
    return buildString {
        for (char in this@filter) {
            if (predicate(char)) append(char)
        }
    }
}
```

- filter í•¨ìˆ˜ëŠ” ìˆ ì–´ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ”ë‹¤.
- í™•ì¥ í•¨ìˆ˜ì™€ buildString í•¨ìˆ˜ ëª¨ë‘ ìˆ˜ì‹  ê°ì²´ë¥¼ ì •ì˜í•˜ê¸° ë•Œë¬¸ì— this ì•ì— ë ˆì´ë¸”ì‡ ë¶™ì—¬ buildString ëŒë‹¤ì˜ ìˆ˜ì‹  ê°ì²´ê°€ ì•„ë‹ˆë¼ filterì˜ ë°”ê¹¥ìª½ ìˆ˜ì‹  ê°ì²´ì— ì ‘ê·¼í•´ì•¼ í•œë‹¤.

### ğŸ”– 10.1.3 ìë°”ì—ì„œ ì½”í‹€ë¦° í•¨ìˆ˜ íƒ€ì… ì‚¬ìš©

```kotlin
fun processTheAnswer (f: (Int) -> Int) {
    printin(f(42))
}
```

```java
processTheAnswer(number -> number + 1);
```

- ìë™ SAM ë³€í™˜ì„ í†µí•´ ì½”í‹€ë¦° ëŒë‹¤ë¥¼ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¥¼ ìš”êµ¬í•˜ëŠ” ìë°” ë©”ì„œë“œì—ê²Œ ë„˜ê¸¸ ìˆ˜ ìˆë‹¤. ì¦‰, ìë°”ì—ì„œ ì •ì˜ëœ ê³ ì°¨ í•¨ìˆ˜ë¥¼ ì•„ë¬´ ë¬¸ì œ ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ë‹¤.
- ìë°”ì—ì„œ ëŒë‹¤ë¥¼ ì¸ìë¡œ ë°›ëŠ” ì½”í‹€ë¦° í™•ì¥í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ì²« ë²ˆì§¸ ì¸ìë¡œ ìˆ˜ì‹  ê°ì²´ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì „ë‹¬í•´ì•¼ í•œë‹¤.

### ğŸ”– 10.1.4 í•¨ìˆ˜ íƒ€ì…ì˜ íŒŒë¼ë¯¸í„°ì— ëŒ€í•´ ê¸°ë³¸ê°’ì„ ì§€ì •í•  ìˆ˜ ìˆê³ , ë„ì´ ë  ìˆ˜ë„ ìˆë‹¤.

```kotlin
fun <T> Collection<T>.joinToString(separator: String = ", ", prefix: String = "", postfix: String = ""): String {
    val result = StringBuilder(prefix)
    
    for ((index, element) in this.withIndex()) {
        if (index > 0) result.append(separator)
        result.append(element)
    }
    result.append(postfix)
    return result.toString()
}
```

- ì´ êµ¬í˜„ì€ ìœ ì—°í•˜ì§€ë§Œ í•µì‹¬ ìš”ì†Œì¸ ì»¬ë ‰ì…˜ì˜ ê° ì›ì†Œë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ëŠ” ë°©ë²•ì„ ì œì–´í•  ìˆ˜ ì—†ë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤.

```kotlin
fun <T> Collection<T>.joinToString(separator: String = ", ", prefix: String = "", postfix: String = "", transform: (T) -> String = { it.toString() }): String {
    val result = StringBuilder(prefix)

    for ((index, element) in this.withIndex()) {
        if (index > 0) result.append(separator)
        result.append(transform(element))
    }
    result.append(postfix)
    return result.toString()
}
```

- í•¨ìˆ˜ íƒ€ì…ì— ëŒ€í•œ ê¸°ë³¸ê°’ì„ ì„ ì–¸í•  ë•Œ íŠ¹ë³„í•œ êµ¬ë¬¸ì´ í•„ìš”í•˜ì§€ëŠ” ì•Šë‹¤.
  - = ë’¤ì— ëŒë‹¤ë¥¼ ë„£ìœ¼ë©´ ëœë‹¤.

```kotlin
fun <T> Collection<T>.joinToString(separator: String = ", ", prefix: String = "", postfix: String = "", transform: ((T) -> String)? = null): String {
    val result = StringBuilder(prefix)

    for ((index, element) in this.withIndex()) {
        if (index > 0) result.append(separator)
        val str = transform?.invoke(element) ?: element.toString()
        result.append(str)
    }
    result.append(postfix)
    return result.toString()
}
```

- transformì€ ë„˜ì´ ë  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ íƒ€ì…ì´ì§€ë§Œ ê·¸ ë°˜í™˜ íƒ€ì…ì€ ë„ì´ ë  ìˆ˜ ì—†ëŠ” íƒ€ì…ì´ë‹¤.
- transformì€ ìì‹ ì´ nullì´ ì•„ë‹ˆë©´ String íƒ€ì…ì˜ ë„ì´ ì•„ë‹Œ ê°’ì„ ë°˜í™˜í•œë‹¤ëŠ” ì‚¬ì‹¤ì„ ë³´ì¥í•œë‹¤.

### ğŸ”– 10.1.5 í•¨ìˆ˜ë¥¼ í•¨ìˆ˜ì—ì„œ ë°˜í™˜

```kotlin
fun getShippingCostCalculator(delivery: Delivery): (Order) -> Double {
    if (delivery == Delivery.EXPEDITED) {
        return { order -> 6 + 2.1 * order.itemCount }
    }
    return { order -> 1.2 * order.itemCount }
}

fun main() {
    val calculator = getShippingCostCalculator(Delivery.EXPEDITED)
    println("Shipping costs ${calculator(Order(3))}")
}
```

- ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ë ¤ë©´ í•¨ìˆ˜ì˜ ë°˜í™˜ íƒ€ì…ìœ¼ë¡œ í•¨ìˆ˜ íƒ€ì…ì„ ì§€ì •í•˜ë©´ ëœë‹¤.

```kotlin
class ContactListFilters {
    var prefix: String = ""
    var onlyWithPhoneNumber: Boolean = false

    fun getPredicate(): (Person) -> Boolean {
        val startWithPrefix = { p: Person -> p.firstName.startsWith(prefix) || p.lastName.startsWith(prefix)}
        if (!onlyWithPhoneNumber) {
            return startWithPrefix
        }
        return { startWithPrefix(it) && it.phoneNumber != null }
    }
}
```

- getPredicate methodëŠ” filter í•¨ìˆ˜ì— ì¸ìë¡œ ë„˜ê¸¸ ìˆ˜ ìˆëŠ” í•¨ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤.
- ê³ ì°¨ í•¨ìˆ˜ëŠ” ì½”ë“œ êµ¬ì¡°ë¥¼ ê°œì„ í•˜ê³  ì¤‘ë³µì„ ì—†ì•¨ ë•Œ ì“¸ ìˆ˜ ìˆëŠ” ì•„ì£¼ ê°•ë ¥í•œ ë„êµ¬ë‹¤.

### ğŸ”– 10.1.6 ëŒë‹¤ë¥¼ í™œìš©í•´ ì¤‘ë³µì„ ì¤„ì—¬ ì½”ë“œ ì¬ì‚¬ìš©ì„± ë†’ì´ê¸°

```kotlin
data class SiteVisit(
    val path: String,
    val duration: Double,
    val os: OS
)

enum class OS { WINDOWS, LINUX, MAC, IOS, ANDROID }

val log = listOf(
    SiteVisit("/", 34.0, OS.WINDOWS),
    SiteVisit("/", 22.0, OS.MAC),
    SiteVisit("/login", 12.0, OS.WINDOWS),
    SiteVisit("/signup", 8.0, OS.IOS),
    SiteVisit("/", 16.3, OS.ANDROID),
)

val averageWindowsDuration = log
    .filter { it.os == OS.WINDOWS }
    .map(SiteVisit::duration)
    .average()
```

- ìœˆë„ìš° ì‚¬ìš©ìì˜ í‰ê·  ë°©ë¬¸ ì‹œê°„ ì¶œë ¥ì€ average í•¨ìˆ˜ë¡œ ì‰½ê²Œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.

```kotlin
fun List<SiteVisit>.averageDurationFor(os: OS) = filter { it.os == os }.map(SiteVisit::duration).average()
```

- ì¤‘ë³µì„ í”¼í•˜ê¸° ìœ„í•´ OSë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë½‘ì•„ë‚¼ ìˆ˜ ìˆë‹¤.

```kotlin
fun List<SiteVisit>.averageDurationFor(predicate: (SiteVisit) -> Boolean) = filter(SiteVisit).map(SiteVisit::duration).average()
```

- ì½”ë“œ ì¤‘ë³µì„ ì¤„ì¼ ë•Œ í•¨ìˆ˜ íƒ€ì…ì´ ìƒë‹¹íˆ ë„ì›€ì´ ëœë‹¤.

## ğŸ“– 10.2 ì¸ë¼ì¸ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ëŒë‹¤ì˜ ë¶€ê°€ ë¹„ìš© ì—†ì• ê¸°

- inline ë³€ê²½ìë¥¼ ì–´ë–¤ í•¨ìˆ˜ì— ë¶™ì´ë©´ ì»´íŒŒì¼ëŸ¬ëŠ” ê·¸ í•¨ìˆ˜ê°€ ì“°ì´ëŠ” ìœ„ì¹˜ì— í•¨ìˆ˜ í˜¸ì¶œì„ ìƒì„±í•˜ëŠ” ëŒ€ì‹ ì— í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ëŠ” ì½”ë“œë¡œ ë°”ê¿”ì¹˜ê¸° í•´ì¤€ë‹¤.

### ğŸ”– 10.2.1 ì¸ë¼ì´ë‹ì´ ì‘ë™í•˜ëŠ” ë°©ì‹

```kotlin
inline fun <T> synchronized(lock: Lock, action: () -> T): T {
    lock.lock()
    try {
        return action()
    }
    finally {
        lock.unlock()
    }
}

fun main() {
    val l = ReentrantLock()
    synchronized(1) {
        // ...
    }
}
```

- ì–´ë–¤ í•¨ìˆ˜ë¥¼ inlineìœ¼ë¡œ ì„ ì–¸í•˜ë©´ ê·¸ í•¨ìˆ˜ì˜ ë³¸ë¬¸ì´ ì¸ë¼ì¸ëœë‹¤.
  - í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ì½”ë“œë¥¼ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ë°”ì´íŠ¸ì½”ë“œ ëŒ€ì‹ ì— í•¨ìˆ˜ ë³¸ë¬¸ì„ ë²ˆì—­í•œ ë°”ì´íŠ¸ì½”ë“œë¡œ ì»´íŒŒì¼í•œë‹¤ëŠ” ëœ»
- synchronized í•¨ìˆ˜ë¥¼ inlineìœ¼ë¡œ ì„ ì–¸í–ˆìœ¼ë¯€ë¡œ synchronizedë¥¼ í˜¸ì¶œí•˜ëŠ” ì½”ë“œëŠ” ëª¨ë‘ ìë°”ì˜ synchronized ë¬¸ê³¼ ê°™ì•„ì§„ë‹¤.

```kotlin
class LockOwner(val lock: Lock) {
    fun runUnderLock(body: () -> Unit) {
        synchronized(lock, body)
    } 
}
```

- ì¸ë¼ì¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ì„œ ëŒë‹¤ë¥¼ ë„˜ê¸°ëŠ” ëŒ€ì‹ ì— í•¨ìˆ˜ íƒ€ì…ì˜ ë³€ìˆ˜ë¥¼ ë„˜ê¸¸ ìˆ˜ë„ ìˆë‹¤.
- í•¨ìˆ˜ì— ë”í•´ í”„ë¡œí¼í‹° ì ‘ê·¼ìì—ë„ inlineì„ ë¶™ì¼ ìˆ˜ ìˆë‹¤.

### ğŸ”– 10.2.2 ì¸ë¼ì¸ í•¨ìˆ˜ì˜ ì œì•½

```kotlin
class FunctionStorage {
    var myStoredFunction: ((Int) -> Unit)? = null
    inline fun storeFunction(f: (Int) -> Unit) { 
        myStoredFunction = f // error
    }
}
```

- í•¨ìˆ˜ê°€ ì¸ë¼ì´ë‹ë  ë•Œ ê·¸ í•¨ìˆ˜ì— ì¸ìë¡œ ì „ë‹¬ëœ ëŒë‹¤ì‹ì˜ ë³¸ë¬¸ì€ ê²°ê³¼ ì½”ë“œì— ì§ì ‘ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ì´ë ‡ê²Œ ëŒë‹¤ê°€ ë³¸ë¬¸ì— ì§ì ‘ í¼ì³ì§€ê¸° ë•Œë¬¸ì— í•¨ìˆ˜ê°€ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë°›ì€ ëŒë‹¤ë¥¼ ë³¸ë¬¸ì— ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ í•œì •ë  ìˆ˜ë°–ì— ì—†ë‹¤.

```kotlin
fun <T, R> Sequence<T>.map(transform: (T) -> R): Sequence<R> {
    return TransformingSequence(this, transform)
}
```

- Sequence.map ì˜ ì •ì˜ë‹¤.
- transform íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë°›ì€ í•¨ìˆ˜ ê°’ì„ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ” ëŒ€ì‹ , TransformingSequenceë¼ëŠ” í´ë˜ìŠ¤ì˜ ìƒì„±ìì—ê²Œ ê·¸ í•¨ìˆ˜ ê°’ì„ ë„˜ê¸´ë‹¤.

```kotlin
inline fun foo(inlined: () -> Unit, noinline notInlined: () -> Unit) {
    //..
}
```

- ì¸ë¼ì´ë‹í•˜ë©´ ì•ˆ ë˜ëŠ” ëŒë‹¤ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ”ë‹¤ë©´ noinline ë³€ê²½ìë¥¼ íŒŒë¼ë¯¸í„° ì´ë¦„ ì•ì— ë¶™ì—¬ ì¸ë¼ì´ë‹ì„ ê¸ˆì§€í•  ìˆ˜ ìˆë‹¤.

### ğŸ”– 10.2.3 ì»¬ë ‰ì…˜ ì—°ì‚° ì¸ë¼ì´ë‹

```kotlin
data class Person(val name: String, val age: Int)

val people = listOf(Person("Alice", 29), Person("Bob", 31))

fun main() {
    println(people.filter { it.age < 30 })
}
```

- ìœ„ ì˜ˆì œë¥¼ ëŒë‹¤ì‹ì„ ì‚¬ìš©í•˜ì§€ ì•Šê²Œ ë‹¤ì‹œ ì“°ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

```kotlin
fun main() {
    val result = mutableListOf<Person>()
    for (person in people) {
        if (person.age < 30) {
            result.add(person)
        }
    }
    println(result)
}
```

- ì½”í‹€ë¦°ì—ì„œ filterëŠ” ì¸ë¼ì¸ í•¨ìˆ˜ë‹¤.
- ì¦‰, filterë¥¼ ì¨ì„œ ìƒê¸´ ë°”ì´íŠ¸ì½”ë“œì™€ ìœ„ ì˜ˆì œëŠ” ê±°ì˜ ê°™ë‹¤.

```kotlin
fun main() {
    println(
        people.filter { it.age < 30 }
            .map(Person::name)
    )
}
```

- mapë„ ì¸ë¼ì¸ í•¨ìˆ˜ë‹¤.
- ì‹œí€€ìŠ¤ì— ì‚¬ìš©ëœ ëŒë‹¤ëŠ” ì¸ë¼ì´ë‹ë˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ ì§€ì—° ê³„ì‚°ì„ í†µí•´ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ë ¤ëŠ” ì´ìœ ë¡œ ëª¨ë“  ì»¬ë ‰ì…˜ ì—°ì‚°ì— asSequenceë¥¼ ë¶™ì´ë ¤ê³  í•´ì„œëŠ” ì•ˆ ëœë‹¤.
- ì‹œí€€ìŠ¤ë¥¼ í†µí•´ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆëŠ” ê²½ìš°ëŠ” ì»¬ë ‰ì…˜ í¬ê¸°ê°€ í° ê²½ìš°ë¿ì´ë‹¤.

### ğŸ”– 10.2.4 ì–¸ì œ í•¨ìˆ˜ë¥¼ ì¸ë¼ì¸ìœ¼ë¡œ ì„ ì–¸í• ì§€ ê²°ì •

- inline í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ë„ ëŒë‹¤ë¥¼ ì¸ìë¡œ ë°›ëŠ” í•¨ìˆ˜ë§Œ ì„±ëŠ¥ì´ ì¢‹ì•„ì§ˆ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤.
- ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œì˜ ê²½ìš° JVMì€ ì´ë¯¸ ê°•ë ¥í•˜ê²Œ ì¸ë¼ì´ë‹ì„ ì§€ì›í•œë‹¤.
  - ë°”ì´íŠ¸ì½”ë“œë¥¼ ì‹¤ì œ ê¸°ê³„ì–´ ì½”ë“œë¡œ ë²ˆì—­í•˜ëŠ” ê³¼ì •(JIT)ì—ì„œ ì¼ì–´ë‚œë‹¤.
- ë°”ì´íŠ¸ì½”ë“œì—ì„œëŠ” ê° í•¨ìˆ˜ êµ¬í˜„ì´ ì •í™•íˆ í•œ ë²ˆë§Œ ìˆìœ¼ë©´ ë˜ê³  ê·¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ëª¨ë“  ë¶€ë¶„ì— ë”°ë¡œ ì½”ë“œë¥¼ ì¤‘ë³µí•  í•„ìš”ê°€ ì—†ë‹¤. ë°˜ë©´, ì½”í‹€ë¦° ì¸ë¼ì¸ í•¨ìˆ˜ëŠ” ì½”ë“œ ì¤‘ë³µì´ ìƒê¸´ë‹¤.
- ëŒë‹¤ë¥¼ ì¸ìë¡œ ë°›ëŠ” í•¨ìˆ˜ë¥¼ ì¸ë¼ì´ë‹í•˜ë©´ ì´ìµì´ ë” ë§ë‹¤.
  - í•¨ìˆ˜ í˜¸ì¶œ ë¹„ìš© ê°ì†Œ
  - ëŒë‹¤ë¥¼ í‘œí˜„í•˜ëŠ” í´ë˜ìŠ¤ì™€ ëŒë‹¤ ì¸ìŠ¤í„´ìŠ¤ì— í•´ë‹¹í•˜ëŠ” ê°ì²´ë¥¼ ë§Œë“¤ í•„ìš”ë„ ì—†ì–´ì§„ë‹¤.
  - JVMì€ í•¨ìˆ˜ í˜¸ì¶œê³¼ ëŒë‹¤ë¥¼ ì¸ë¼ì´ë‹í•´ì¤„ ì •ë„ë¡œ ë˜‘ë˜‘í•˜ì§€ ëª»í•˜ë‹¤.
  - ì¶”ê°€ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- inline ë³€ê²½ìë¥¼ í•¨ìˆ˜ì— ë¶™ì¼ ë•ŒëŠ” ì½”ë“œ í¬ê¸°ì— ì£¼ì˜ë¥¼ ê¸°ìš¸ì—¬ì•¼ í•œë‹¤.

### ğŸ”– 10.2.5 withLock, use, useLinesë¡œ ìì› ê´€ë¦¬ë¥¼ ìœ„í•´ ì¸ë¼ì¸ëœ ëŒë‹¤ ì‚¬ìš©

```kotlin
val l: Lock = ReentrantLock()
l.withLock {
    //..
}
```

- withLockì€ ë½ì„ íšë“í•œ í›„ ì‘ì—…í•˜ëŠ” ìˆ™ì–´ë¥¼ ë³„ë„ì˜ í•¨ìˆ˜ë¡œ ë¶„ë¦¬

```kotlin
fun readFirstLineFromFile(fileName: String): String {
    BufferedReader(FileReader(fileName)).use { br ->
        return br.readLine()
    }
}
```

- use í•¨ìˆ˜ëŠ” ë‹«ì„ ìˆ˜ ìˆëŠ” ìì›ì— ëŒ€í•´ í˜¸ì¶œí•˜ëŠ” í™•ì¥ í•¨ìˆ˜ë‹¤.
  - ëŒë‹¤ë¥¼ í˜¸ì¶œí•˜ê³  ì‚¬ìš© í›„ ìì›ì´ í™•ì‹¤íˆ ë‹«íˆê²Œ í•œë‹¤.
- use í•¨ìˆ˜ëŠ” ì¸ë¼ì¸ í•¨ìˆ˜ì´ë©°, ì„±ëŠ¥ì—ëŠ” ì˜í–¥ì´ ì—†ë‹¤.

```kotlin
fun readFirstLineFromFile(fileName: String): String {
    Path(fileName).useLines { 
        return it.first()
    }
}
```

- useëŠ” Closeableê³¼ í•¨ê»˜ ì“°ì´ì§€ë§Œ useLinesëŠ” Fileê³¼ Path ê°ì²´ì— ì •ì˜ë¼ ìˆê³ , ëŒë‹¤ê°€ ë¬¸ìì—´ ì‹œí€€ìŠ¤ì— ì ‘ê·¼í•˜ê²Œ í•´ì¤€ë‹¤.

## ğŸ“– 10.3 ëŒë‹¤ì—ì„œ ë°˜í™˜: ê³ ì°¨ í•¨ìˆ˜ì—ì„œ íë¦„ ì œì–´

### ğŸ”– 10.3.1 ëŒë‹¤ ì•ˆì˜ return ë¬¸: ëŒë‹¤ë¥¼ ë‘˜ëŸ¬ì‹¼ í•¨ìˆ˜ì—ì„œ ë°˜í™˜

```kotlin
data class Person(val name: String, val age: Int)

val people = listOf(Person("Alice", 29), Person("Bob", 31))

fun lookForAlice(people: List<Person>) {
    for (person in people) {
        if (person.name == "Alice") {
            println("Found!")
            return
        }
    }
    println("Alice is not found")
}
```

```kotlin
fun lookForAlice(people: List<Person>) {
    people.forEach {
        if (it.name == "Alice") {
            println("Found!")
            return
        }
    }
    println("Alice is not found")
}
```

- ìœ„ ë‘ ì˜ˆì œëŠ” ê°™ì€ ì˜ë¯¸ë‹¤.
- ëŒë‹¤ ì•ˆì—ì„œ returnì„ ì‚¬ìš©í•˜ë©´ ëŒë‹¤ì—ì„œë§Œ ë°˜í™˜ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ê·¸ ëŒë‹¤ë¥¼ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜ê°€ ì‹¤í–‰ì„ ëë‚´ê³  ë°˜í™˜ëœë‹¤.
- ë¹„ë¡œì»¬ return: ìì‹ ì„ ë‘˜ëŸ¬ìŒ“ê³  ìˆëŠ” ë¸”ë¡ë³´ë‹¤ ë” ë°”ê¹¥ì— ìˆëŠ” ë‹¤ë¥¸ ë¸”ë¡ì„ ë°˜í™˜í•˜ê²Œ ë§Œë“œëŠ” return ë¬¸
- returnì´ ë°”ê¹¥ìª½ í•¨ìˆ˜ë¥¼ ë°˜í™˜ì‹œí‚¬ ìˆ˜ ìˆëŠ” ë•ŒëŠ” ëŒë‹¤ë¥¼ ì¸ìë¡œ ë°›ëŠ” í•¨ìˆ˜ê°€ ì¸ë¼ì¸ í•¨ìˆ˜ì¸ ê²½ìš°ë‹¤.
  - ì¸ë¼ì´ë‹ë˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ì— ì „ë‹¬ë˜ëŠ” ëŒë‹¤ ì•ˆì—ì„œ returnì„ ì‚¬ìš©í•  ìˆ˜ëŠ” ì—†ë‹¤.

### ğŸ”– 10.3.2 ëŒë‹¤ë¡œë¶€í„° ë°˜í™˜: ë ˆì´ë¸”ì„ ì‚¬ìš©í•œ return

- ë¡œì»¬ return: ëŒë‹¤ì˜ ì‹¤í–‰ì„ ëë‚´ê³  ëŒë‹¤ë¥¼ í˜¸ì¶œí–ˆë˜ ì½”ë“œì˜ ì‹¤í–‰ì„ ê³„ì† ì´ì–´ê°„ë‹¤.
- ë¡œì»¬ returnê³¼ ë¹„ë¡œì»¬ returnì„ êµ¬ë¶„í•˜ê¸° ìœ„í•´ ë ˆì´ë¸”ì„ ì‚¬ìš©í•œë‹¤.

```kotlin
fun lookForAlice(people: List<Person>) {
    people.forEach label@{
        if (it.name != "Alice") return@label
        println("Found Alice")
    }
}
```

- returnìœ¼ë¡œ ì‹¤í–‰ì„ ëë‚´ê³  ì‹¶ì€ ëŒë‹¤ì‹ ì•ì— ë ˆì´ë¸”ì„ ë¶™ì¸ë‹¤.

```kotlin
fun lookForAlice(people: List<Person>) {
    people.forEach {
        if (it.name != "Alice") return@forEach
        println("Found Alice!")
    }
}
```

- ëŒë‹¤ì‹ì˜ ë ˆì´ë¸”ì„ ëª…ì‹œí•˜ë©´ í•¨ìˆ˜ ì´ë¦„ì„ ë ˆì´ë¸”ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤ëŠ” ì ì— ìœ ì˜

### ğŸ”– 10.3.3 ìµëª… í•¨ìˆ˜: ê¸°ë³¸ì ìœ¼ë¡œ ë¡œì»¬ return

```kotlin
fun lookForAlice(people: List<Person>) {
    people.forEach (fun (person) {
        if (person.name == "Alice") return
        println("${person.name} is not Alice")
    })
}
```

- returnì€ ê°€ì¥ ê°€ê¹Œìš´ í•¨ìˆ˜ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
- ìµëª… í•¨ìˆ˜ ì•ˆì—ì„œ ë ˆì´ë¸”ì´ ë¶™ì§€ ì•Šì€ return ì‹ì€ ìµëª… í•¨ìˆ˜ ìì²´ë¥¼ ë°˜í™˜ì‹œí‚¬ ë¿ ìµëª… í•¨ìˆ˜ë¥¼ ë‘˜ëŸ¬ì‹¼ ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ë°˜í™˜ì‹œí‚¤ì§€ ì•ŠëŠ”ë‹¤.
- ìµëª… í•¨ìˆ˜ëŠ” ì¼ë°˜ í•¨ìˆ˜ì™€ ë¹„ìŠ·í•´ ë³´ì´ì§€ë§Œ ì‹¤ì œë¡œëŠ” ëŒë‹¤ì‹ì— ëŒ€í•œ ë¬¸ë²•ì  í¸ì˜ì¼ ë¿ì´ë‹¤.
