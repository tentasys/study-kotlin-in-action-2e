# ğŸ“š 4ì¥ í´ë˜ìŠ¤, ê°ì²´, ì¸í„°í˜ì´ìŠ¤

## ğŸ“– 4.1 í´ë˜ìŠ¤ ê³„ì¸µ ì •ì˜

### ğŸ”– 4.1.1 ì½”í‹€ë¦° ì¸í„°í˜ì´ìŠ¤

- ì½”í‹€ë¦° ì¸í„°í˜ì´ìŠ¤ ì•ˆì—ëŠ” ì¶”ìƒ ë©”ì„œë“œë¿ ì•„ë‹ˆë¼ êµ¬í˜„ì´ ìˆëŠ” ë©”ì„œë“œë„ ì •ì˜í•  ìˆ˜ ìˆë‹¤.
  - ë‹¤ë§Œ, ì¸í„°í˜ì´ìŠ¤ì—ëŠ” ì•„ë¬´ëŸ° ìƒíƒœë„ ë“¤ì–´ê°ˆ ìˆ˜ ì—†ë‹¤.

```kotlin
interface Clickable {
    fun click()
}
```

```kotlin
class Button : Clickable {
    override fun click() = println("I was clicked")
}

fun main() {
    Button().click()
}
```

- ìƒì†ì´ë‚˜ compositionì—ì„œ ëª¨ë‘ í´ë˜ìŠ¤ ì´ë¦„ ë’¤ì— ì½œë¡ ì„ ë¶™ì´ê³  ì¸í„°í˜ì´ìŠ¤ë‚˜ í´ë˜ìŠ¤ ì´ë¦„ì„ ì ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.
- í´ë˜ìŠ¤ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì›í•˜ëŠ” ê°œìˆ˜ ì œí•œ ì—†ì´ ë§ˆìŒëŒ€ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆì§€ë§Œ í´ë˜ìŠ¤ëŠ” ì˜¤ì§ í•˜ë‚˜ë§Œ í™•ì¥í•  ìˆ˜ ìˆë‹¤.
- ì˜¤ë²„ë¼ì´ë“œë¥¼ í•  ë•Œ override ë³€ê²½ìë¥¼ ê¼­ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
  - ìƒìœ„ í´ë˜ìŠ¤ì— ìˆëŠ” ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë”© ë°©ì§€

```kotlin
interface Clickable {
    fun click()
    fun showOff() = println("I'm clickable!")
}
```

- ë””í´íŠ¸ êµ¬í˜„ ê°€ëŠ¥

```kotlin
interface Focusable {
    fun setFocus(b: Boolean) = println("I ${if (b) "got" else "lost"} focus.")
    
    fun showOff() = println("I'm focusable!")
}
```

- í•œ í´ë˜ìŠ¤ì—ì„œ ë‘ ì¸í„°í˜ì´ìŠ¤ë¥¼ í•¨ê»˜ êµ¬í˜„í•œ í›„, ë™ì¼í•œ showOff ë””í´íŠ¸ êµ¬í˜„ì„ ì„ íƒí•˜ë ¤ë©´ ì»´íŒŒì¼ëŸ¬ ì—ëŸ¬ê°€ ë°œìƒí•¨.

```kotlin
class Button : Clickable, Focusable {
    override fun click() = println("I was clicked")
    
    override fun showOff() {
        super<Clickable>.showOff()
        super<Focusable>.showOff()
    }
}
```

### ğŸ”– 4.1.2 open, final, abstract ë³€ê²½ì: ê¸°ë³¸ì ìœ¼ë¡œ final

```kotlin
open class RichButton : Clickable {
    fun disable() {}
    open fun animate() {}
    override fun click() {}
}
```

- ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  í´ë˜ìŠ¤ì™€ ë©”ì„œë“œëŠ” finalì´ë‹¤.
  - í´ë˜ìŠ¤ì— ëŒ€í•´ í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ ìˆ˜ ì—†ê³ , ê¸°ë°˜ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë¥¼ í•˜ìœ„ í´ë˜ìŠ¤ê°€ ì˜¤ë²„ë¼ì´ë“œí•  ìˆ˜ë„ ì—†ë‹¤.
- ì–´ë–¤ í´ë˜ìŠ¤ì˜ ìƒì†ì„ í—ˆìš©í•˜ë ¤ë©´ open ë³€ê²½ìë¥¼ ë¶™ì—¬ì•¼ í•œë‹¤.
  - ë©”ì„œë“œë‚˜ í”„ë¡œí¼í‹° ë˜í•œ ë§ˆì°¬ê°€ì§€

```kotlin
open class RichButton : Clickable {
    final override fun click() {}
}
```

- ëª…ì‹œì ìœ¼ë¡œ ì˜¤ë²„ë¼ì´ë“œ ê¸ˆì§€í•˜ë ¤ë©´ final í‘œì‹œ

```kotlin
abstract class Animated { // ì¶”ìƒí´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ë§Œë“¤ ìˆ˜ ì—†ìŒ.
    abstract val animationSpeed: Double // ì¶”ìƒ í”„ë¡œí¼í‹°: í•˜ìœ„ í´ë˜ìŠ¤ëŠ” ë°˜ë“œì‹œ ê°’ì´ë‚˜ ì ‘ê·¼ì ì œê³µ
    val keyframes: Int = 20
    open val frames: Int = 60
    
    abstract fun animate() // ì¶”ìƒí•¨ìˆ˜: í•˜ìœ„ í´ë˜ìŠ¤ëŠ” ë°˜ë“œì‹œ ì˜¤ë²„ë¼ì´ë“œí•´ì•¼í•¨.
    open fun stopAnimating() {}
    fun animateTwice() {}
}
```

- ì¶”ìƒí´ë˜ìŠ¤ëŠ” ì¸ìŠ¤í„´ìŠ¤í™”í•  ìˆ˜ ì—†ë‹¤.

### ğŸ”– 4.1.3 ê°€ì‹œì„± ë³€ê²½ì: ê¸°ë³¸ì ìœ¼ë¡œ ê³µê°œ

- ê°€ì‹œì„± ë³€ê²½ìëŠ” ì½”ë“œ ê¸°ë°˜ì— ìˆëŠ” ì„ ì–¸ì— ëŒ€í•œ í´ë˜ìŠ¤ ì™¸ë¶€ ì ‘ê·¼ì„ ì œì–´
- public, protected, private
- ê¸°ë³¸ì ìœ¼ë¡œ public
- module ì•ˆìœ¼ë¡œë§Œ í•œì •ëœ ê°€ì‹œì„±ì„ ìœ„í•´ internal ì œê³µ
  - module: í•¨ê»˜ ì»´íŒŒì¼ë˜ëŠ” ì½”í‹€ë¦° íŒŒì¼ì˜ ì§‘í•©
- íŒ¨í‚¤ì§€ ì „ìš© ê°€ì‹œì„± ê°œë…ì´ ì—†ìŒ

```kotlin
internal open class TalkativeButton {
    private fun yell() = println("Hey!")
    protected fun whisper() = println("Let's talk!")
}

fun TalkativeButton.giveSpeech() { // ì˜¤ë¥˜
    yell() // ì˜¤ë¥˜
    
    whisper() // ì˜¤ë¥˜
}
```

- ê¸°ë°˜ íƒ€ì… ëª©ë¡ì— ë“¤ì–´ìˆëŠ” íƒ€ì…ì´ë‚˜ ì œë„¤ë¦­ í´ë˜ìŠ¤ì˜ íƒ€ì… íŒŒë¼ë¯¸í„°ì— ë“¤ì–´ìˆëŠ” íƒ€ì…ì˜ ê°€ì‹œì„±ì€ ê·¸ í´ë˜ìŠ¤ ìì‹ ì˜ ê°€ì‹œì„±ê³¼ ê°™ê±°ë‚˜ ë” ë†’ì•„ì•¼ í•˜ê³ , ë©”ì„œë“œì˜ ì‹œê·¸ë‹ˆì²˜ì— ì‚¬ìš©ëœ ëª¨ë“  íƒ€ì…ì˜ ê°€ì‹œì„±ì€ ê·¸ ë©”ì„œë“œì˜ ê°€ì‹œì„±ê³¼ ê°™ê±°ë‚˜ ë” ë†’ì•„ì•¼ í•¨.
- í´ë˜ìŠ¤ë¥¼ í™•ì¥í•œ í•¨ìˆ˜ëŠ” ê·¸ í´ë˜ìŠ¤ì˜ privateì´ë‚˜ protected ë©¤ë²„ì— ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.

### ğŸ”– 4.1.4 ë‚´ë¶€ í´ë˜ìŠ¤ì™€ ë‚´í¬ëœ í´ë˜ìŠ¤: ê¸°ë³¸ì ìœ¼ë¡œ ë‚´í¬ í´ë˜ìŠ¤

- ìë°”ì™€ ë‹¬ë¦¬ ë‚´í¬ í´ë˜ìŠ¤ëŠ” ëª…ì‹œì ìœ¼ë¡œ ìš”ì²­í•˜ì§€ ì•ŠëŠ” í•œ ë°”ê¹¥ìª½ í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œì´ ì—†ë‹¤.

```kotlin
interface State : Serializable

interface View {
    fun getCurrentState(): State
    fun restoreState(state: State) {}
}

class Button : View {
    override fun getCurrentState(): State = ButtonState()
    override fun restoreState(state: State) {}
    class ButtonState : State {}
}
```

- ë‚´í¬ëœ í´ë˜ìŠ¤ì— ì•„ë¬´ëŸ° ë³€ê²½ìë„ ì—†ìœ¼ë©´ ìë°” static ë‚´í¬ í´ë˜ìŠ¤ì™€ ê°™ë‹¤.

```kotlin
class Outer {
    inner class Inner {
        fun getOuterReference(): Outer = this@Outer
    }
}
```

- ë‚´ë¶€ í´ë˜ìŠ¤ì—ì„œ ë°”ê¹¥ìª½ í´ë˜ìŠ¤ì˜ ì°¸ì¡°ì— ì ‘ê·¼í•˜ë ¤ë©´ this@Outerë¼ê³  ì¨ì•¼ í•œë‹¤.

### ğŸ”– 4.1.5 ë´‰ì¸ëœ í´ë˜ìŠ¤: í™•ì¥ì´ ì œí•œëœ í´ë˜ìŠ¤ ê³„ì¸µ ì •ì˜

```kotlin
interface Expr
class Num(val value: Int) : Expr
class Sum(val left: Expr, val right: Expr) : Expr

fun eval(e: Expr): Int =
    when (e) {
        is Num -> e.value
        is Sum -> eval(e.left) + eval(e.right)
        else -> throw IllegalArgumentException("Unknown expression")
    }
```

- whenì„ ì‚¬ìš©í•  ë•Œ elseëŠ” ê°•ì œì´ë‹¤.

```kotlin
sealed class Expr
class Num(val value: Int) : Expr()
class Sum(val left: Expr, val right: Expr) : Expr()

fun eval(e: Expr): Int =
    when (e) {
        is Num -> e.value
        is Sum -> eval(e.left) + eval(e.right)
    }
```

- sealed ë³€ê²½ìë¥¼ ë¶™ì´ë©´ ê·¸ ìƒìœ„ í´ë˜ìŠ¤ë¥¼ ìƒì†í•œ í•˜ìœ„ í´ë˜ìŠ¤ì˜ ê°€ëŠ¥ì„±ì„ ì œí•œí•  ìˆ˜ ìˆë‹¤.
- í•˜ìœ„ í´ë˜ìŠ¤ë“¤ì€ ë°˜ë“œì‹œ ì»´íŒŒì¼ ì‹œì ì— ì•Œë ¤ì ¸ì•¼ í•˜ë©°, sealed í´ë˜ìŠ¤ê°€ ì •ì˜ëœ íŒ¨í‚¤ì§€ì™€ ê°™ì€ íŒ¨í‚¤ì§€ì— ì†í•´ì•¼ í•˜ë©°, ëª¨ë“  í•˜ìœ„í´ë˜ìŠ¤ê°€ ê°™ì€ ëª¨ë“ˆ ì•ˆì— ìœ„ì¹˜í•´ì•¼ í•œë‹¤.
- ë””í´íŠ¸ ë¶„ê¸°(else)ê°€ í•„ìš” ì—†ë‹¤.
- sealed ë³€ê²½ìëŠ” í´ë˜ìŠ¤ê°€ ì¶”ìƒ í´ë˜ìŠ¤ì„ì„ ëª…ì‹œí•œë‹¤.
  - abstractë¥¼ ë¶™ì¼ í•„ìš”ê°€ ì—†ìŒ.
  - ì¶”ìƒ ë©¤ë²„ë¥¼ ì„ ì–¸í•œ ìˆ˜ ìˆìŒ.

```kotlin
sealed interface Toggleable {
    fun toggle()
}

class LightSwitch : Toggleable {
    override fun toggle() = println("Lights!")
}

class Camera: Toggleable {
    override fun toggle() = println("Camera!")
}
```

- ë´‰ì¸ëœ ì¸í„°í˜ì´ìŠ¤ë„ ë˜‘ê°™ì€ ê·œì¹™ì„ ë”°ë¦„.
- ë´‰ì¸ëœ ì¸í„°í˜ì´ìŠ¤ê°€ ì†í•œ ëª¨ë“ˆì´ ì»´íŒŒì¼ë˜ê³  ë‚˜ë©´ ì´ ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•œ ìƒˆë¡œìš´ êµ¬í˜„ì„ ë°–ì—ì„œ ì¶”ê°€í•  ìˆ˜ ì—†ë‹¤.

## ğŸ“– 4.2 ë»”í•˜ì§€ ì•Šì€ ìƒì„±ìë‚˜ í”„ë¡œí¼í‹°ë¥¼ ê°–ëŠ” í´ë˜ìŠ¤ ì„ ì–¸

### ğŸ”– 4.2.1 í´ë˜ìŠ¤ ì´ˆê¸°í™”: ì£¼ ìƒì„±ìì™€ ì´ˆê¸°í™” ë¸”ë¡

```kotlin
class User(val nickname: String)
```

- í´ë˜ìŠ¤ ì´ë¦„ ë’¤ì— ì˜¤ëŠ” ê´„í˜¸ë¡œ ë‘˜ëŸ¬ìŒ“ì¸ ì½”ë“œë¥¼ **ì£¼ ìƒì„±ì**ë¼ê³  ë¶€ë¥¸ë‹¤.

```kotlin
class User constructor(_nickname: String) {
    val nickname: String
    
    init {
        nickname = _nickname
    }
}
```

- constructor í‚¤ì›Œë“œëŠ” ì£¼ ìƒì„±ìë‚˜ ë¶€ ìƒì„±ì ì •ì˜ë¥¼ ì‹œì‘í•  ë•Œ ì‚¬ìš©í•œë‹¤.
- init í‚¤ì›Œë“œëŠ” ì´ˆê¸°í™” ë¸”ë¡ì„ ì‹œì‘í•œë‹¤.
- ì£¼ ìƒì„±ì ì•ì— ë³„ë‹¤ë¥¸ ì–´ë…¸í…Œì´ì…˜ì´ë‚˜ ê°€ì‹œì„± ë³€ê²½ìê°€ ì—†ë‹¤ë©´ constructorë¥¼ ìƒëµí•´ë„ ëœë‹¤.

```kotlin
class User(val nickname: String, val isSubscribed: Boolean = true)
```

- ìƒì„±ì íŒŒë¼ë¯¸í„°ì—ë„ ê¸°ë³¸ê°’ì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

```kotlin
open class User(val nickname: String)

class SocialUser(nickname: String) : User(nickname)
```

- ê¸°ë°˜ í´ë˜ìŠ¤ì˜ ìƒì„±ìê°€ ì¸ìë¥¼ ë°›ì•„ì•¼ í•œë‹¤ë©´ í´ë˜ìŠ¤ì˜ ì£¼ ìƒì„±ìì—ì„œ ê¸°ë°˜ ìƒì„±ìë¥¼ í˜¸ì¶œí•´ì•¼ í•  í•„ìš”ê°€ ìˆë‹¤.
- í´ë˜ìŠ¤ë¥¼ ì •ì˜í•  ë•Œ ë³„ë„ë¡œ ìƒì„±ìë¥¼ ì •ì˜í•˜ì§€ ì•Šìœ¼ë©´ ì»´íŒŒì¼ëŸ¬ê°€ ìë™ìœ¼ë¡œ ì¸ìê°€ ì—†ëŠ” ë””í´íŠ¸ ìƒì„±ìë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.
  - ê¸°ë°˜ í´ë˜ìŠ¤ì˜ ì´ë¦„ ë’¤ì— ë¹ˆ ê´„í˜¸ í•„ìš”
  - ì¸í„°í˜ì´ìŠ¤ì˜ ê²½ìš° ìƒì„±ìê°€ ì—†ìœ¼ë¯€ë¡œ ê´„í˜¸ê°€ ì—†ìŒ.

```kotlin
class Secretive private constructor(private val agentName: String) {}
```

- í´ë˜ìŠ¤ ì™¸ë¶€ì—ì„œ ì¸ìŠ¤í„´ìŠ¤í™”í•˜ì§€ ëª»í•˜ê²Œ ë§‰ê³  ì‹¶ë‹¤ë©´ private ì„ ì–¸

### ğŸ”– 4.2.2 ë¶€ ìƒì„±ì: ìƒìœ„ í´ë˜ìŠ¤ë¥¼ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì´ˆê¸°í™”

```kotlin
open class Downloader {
    constructor(url: String?) {}
    
    constructor(uri: URI?) {}
}
```

- ì½”í‹€ë¦°ì€ ì½”í‹€ë¦°ì˜ ë””í´íŠ¸ íŒŒë¼ë¯¸í„° ê°’ê³¼ ì´ë¦„ ë¶™ì€ ì¸ì ë¬¸ë²•ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ë¶€ìƒì„±ìê°€ í•„ìš”í•  ì¼ì´ ì ë‹¤.
- ìƒìœ„ í´ë˜ìŠ¤ì—ì„œ super() í‚¤ì›Œë“œë¥¼ í†µí•´ ìì‹ ì— ëŒ€ì‘í•˜ëŠ” ìƒìœ„ í´ë˜ìŠ¤ ìƒì„±ìë¥¼ í˜¸ì¶œí•œë‹¤.
- this()ë¥¼ í†µí•´ í´ë˜ìŠ¤ ìì‹ ì˜ ë‹¤ë¥¸ ìƒì„±ìë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.

```kotlin
class MyDownloader : Downloader() {
    constructor(url: String?) : this(URI(url))
    constructor(uri: URI?) : super(uri)
}
```

- í´ë˜ìŠ¤ì— ì£¼ ìƒì„±ìê°€ ì—†ë‹¤ë©´ ëª¨ë“  ë¶€ ìƒì„±ìëŠ” ë°˜ë“œì‹œ ìƒìœ„ í´ë˜ìŠ¤ë¥¼ ì´ˆê¸°í™”í•˜ê±°ë‚˜ ë‹¤ë¥¸ ìƒì„±ìì—ê²Œ ìƒì„±ì„ ìœ„ì„í•´ì•¼ í•œë‹¤.
- ë¶€ ìƒì„±ìê°€ í•„ìš”í•œ ì£¼ëœ ì´ìœ ëŠ” ìë°” ìƒí˜¸ìš´ì˜ì„±ì´ë‹¤.

### ğŸ”– 4.2.3 ì¸í„°í˜ì´ìŠ¤ì— ì„ ì–¸ëœ í”„ë¡œí¼í‹° êµ¬í˜„

```kotlin
interface User {
    val nickname: String
}
```

- ì¸í„°í˜ì´ìŠ¤ì— ì¶”ìƒ í”„ë¡œí¼í‹° ì„ ì–¸ì„ ë„£ì„ ìˆ˜ ìˆë‹¤.

```kotlin
class PrivateUser(override val nickname: String) : User

class SubscribingUser(val email: String) : User {
    override val nickname: String
        get() = email.substringBefore('@')
}

class SocialUser(val accountId: Int) : User {
    override val nickname: getFacebookName(accountId)
}

fun getNameFromSocialNetwork(accountId: Int) = "bottleh$accountId"
```

- ì¸í„°í˜ì´ìŠ¤ì˜ í”„ë¡œí¼í‹° êµ¬í˜„í•˜ê¸°
- ì¸í„°í˜ì´ìŠ¤ì— ì¶”ìƒ í”„ë¡œí¼í‹°ë¿ ì•„ë‹ˆë¼ ê²Œí„°ì™€ ì„¸í„°ê°€ ìˆëŠ” í”„ë¡œí¼í‹°ë¥¼ ì„ ì–¸í•  ìˆ˜ë„ ìˆë‹¤.
  - ìœ„ì™€ ê°™ì€ ê²Œí„°ì™€ ì„¸í„°ëŠ” ë’·ë°›ì¹¨í•˜ëŠ” í•„ë“œë¥¼ ì°¸ì¡°í•  ìˆ˜ ì—†ë‹¤.

```kotlin
interface EmailUser {
    val email: String
    val nickname: String
        get() = email.substringBefore('@')
}
```

- í•˜ìœ„ í´ë˜ìŠ¤ëŠ” emailì„ ë°˜ë“œì‹œ ì˜¤ë²„ë¼ì´ë”©
- nickname ìƒì† ê°€ëŠ¥

#### ğŸ› ï¸ í•¨ìˆ˜ ëŒ€ì‹  í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•  ë•Œ

- ì˜ˆì™¸ë¥¼ ë˜ì§€ì§€ ì•ŠëŠ”ë‹¤.
- ê³„ì‚° ë¹„ìš©ì´ ì ê²Œ ë“ ë‹¤.
- ê°ì²´ ìƒíƒœê°€ ë°”ë€Œì§€ ì•Šìœ¼ë©´ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œí•´ë„ í•­ìƒ ê°™ì€ ê²°ê³¼ë¥¼ ëŒë ¤ì¤€ë‹¤.

### ğŸ”– 4.2.4 ê²Œí„°ì™€ ì„¸í„°ì—ì„œ ë’·ë°›ì¹¨í•˜ëŠ” í•„ë“œì— ì ‘ê·¼

```kotlin
class User(val name: String) {
    var address: String = "unspecified"
    set(value: String) {
        println(
            """
                Address was changed for $name:
                "$field" -> "$value".
            """.trimIndent())
        field = value
    }
}
```

- ì„¸í„°ì—ì„œ ë’·ë°›ì¹¨í•˜ëŠ” í•„ë“œ ì ‘ê·¼
- ì ‘ê·¼ìì˜ ë³¸ë¬¸ì—ì„œëŠ” fieldë¼ëŠ” íŠ¹ë³„í•œ ì‹ë³„ìë¥¼ í†µí•´ ë’·ë°›ì¹¨í•˜ëŠ” í•„ë“œì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
- varì¸ ê²½ìš°ì—ëŠ” ê²Œí„°ë‚˜ ì„¸í„° ëª¨ë‘ì— fieldê°€ ì—†ì–´ì•¼ í•œë‹¤.

### ğŸ”– 4.2.5 ì ‘ê·¼ìì˜ ê°€ì‹œì„± ë³€ê²½

```kotlin
class LengthCounter {
    var counter: Int = 0
        private set // í´ë˜ìŠ¤ ë°–ì—ì„œ ì´ í”„ë¡œí¼í‹°ì˜ ê°’ì„ ë°”ê¿€ ìˆ˜ ì—†ë‹¤.

    fun addWord(word: String) {
        counter += word.length
    }
}
```

- í´ë˜ìŠ¤ ì™¸ë¶€ì—ì„œ ì´ í”„ë¡œí¼í‹°ì— ê°’ì„ ì“°ë ¤í•˜ë©´ ì»´íŒŒì¼ ì‹œì  ì˜¤ë¥˜ê°€ ë°œìƒ

## ğŸ“– 4.3 ì»´íŒŒì¼ëŸ¬ê°€ ìƒì„±í•œ ë©”ì„œë“œ: ë°ì´í„° í´ë˜ìŠ¤ì™€ í´ë˜ìŠ¤ ìœ„ì„

### ğŸ”– 4.3.1 ëª¨ë“  í´ë˜ìŠ¤ê°€ ì •ì˜í•´ì•¼ í•˜ëŠ” ë©”ì„œë“œ

```kotilin
class Customer(val name: String, val postalCode: Int)
```

#### ğŸ› ï¸ ë¬¸ìì—´ í‘œí˜„: toString()

- ê¸°ë³¸ ì œê³µë˜ëŠ” ê°ì²´ì˜ ë¬¸ìì—´ í‘œí˜„ì€ í´ë˜ìŠ¤ ì´ë¦„ê³¼ ê°ì²´ì˜ ì£¼ì†Œë¥¼ í‘œí˜„í•¨.

```kotlin
class Customer(val name: String, val postalCode: Int) {
    override fun toString() = "Customer(name=$name, postalCode=$postalCode)"
}
```

#### ğŸ› ï¸ ê°ì²´ì˜ ë™ë“±ì„±: equals()

```kotlin
class Customer(val name: String, val postalCode: Int) {
    override fun equals(other: Any?): Boolean {
        if (other == null || other !is Customer) 
            return false
        return name == other.name && postalCode == other.postalCode
    }
}
```

- ì½”í‹€ë¦°ì—ì„œ == ì—°ì‚°ìëŠ” ì°¸ì¡° ë™ì¼ì„±ì„ ê²€ì‚¬í•˜ì§€ ì•Šê³  ê°ì²´ì˜ ë™ë“±ì„±ì„ ê²€ì‚¬í•œë‹¤.
- AnyëŠ” Javaì˜ Objectì— ëŒ€ì‘ë˜ëŠ” ëª¨ë“  í´ë˜ìŠ¤ì˜ ìµœìƒìœ„ í´ë˜ìŠ¤

#### ğŸ› ï¸ í•´ì‹œ ì»¨í…Œì´ë„ˆ: hashCode()

```kotlin
class Customer(val name: String, val postalCode: Int) {
    override fun equals(other: Any?): Boolean {
        if (other == null || other !is Customer)
            return false
        return name == other.name && postalCode == other.postalCode
    }
    override fun hashCode(): Int = name.hashCode() * 31 + postalCode
}
```

- JVM ì–¸ì–´ì—ì„œëŠ” hashCodeê°€ ì§€ì¼œì•¼ í•˜ëŠ” equals()ê°€ trueë¥¼ ë°˜í™˜í•˜ëŠ” ë‘ ê°ì²´ëŠ” ë°˜ë“œì‹œ ê°™ì€ hasCode()ë¥¼ ë°˜í™˜í•´ì•¼ í•œë‹¤.

### ğŸ”– 4.3.2 ë°ì´í„° í´ë˜ìŠ¤: ëª¨ë“  í´ë˜ìŠ¤ê°€ ì •ì˜í•´ì•¼ í•˜ëŠ” ë©”ì„œë“œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±

```kotlin
data class Customer(val name: String, val postalCode: Int)
```

- equals, hasCode, toStringì„ ëª¨ë‘ í¬í•¨í•œë‹¤.

#### ğŸ› ï¸ ë°ì´í„° í´ë˜ìŠ¤ì™€ ë¶ˆë³€ì„±: copy() ë©”ì„œë“œ

```kotlin
class Customer(val name: String, val postalCode: Int) {
    fun copy(name: String = this.name, postalCode: Int = this.postalCode): Customer = Customer(name, postalCode)
}
```

- ë¶ˆë³€ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ í”„ë¡œê·¸ë¨ì— ëŒ€í•´ í›¨ì”¬ ì‰½ê²Œ ì¶”ë¡ í•  ìˆ˜ ìˆë‹¤.
- ë°ì´í„° í´ë˜ìŠ¤ëŠ” copy ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤.
  - ê°ì²´ë¥¼ ë³µì‚¬í•˜ë©´ì„œ ì¼ë¶€ í”„ë¡œí¼í‹°ë¥¼ ë°”ê¿€ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” copy ë©”ì„œë“œ

#### ğŸ› ï¸ í´ë˜ìŠ¤ ìœ„ì„: by í‚¤ì›Œë“œ ì‚¬ìš©

Decorator íŒ¨í„´

```kotlin
class DelegatingCollection<T>: Collection<T> {
    private val innerList = arrayListOf<T>()
    
    override val size: Int get() = innerList.size
    override fun isEmpty(): Boolean = innerList.isEmpty()
    override fun contains(element: T): Boolean = innerList.contains(element)
    override fun containsAll(elements: Collection<T>): Boolean = innerList.containsAll(elements)
    override fun iterator(): Iterator<T> = innerList.iterator()
}
```

```kotlin
class DelegatingCollection<T>(innerList: Collection<T> = mutableListOf<T>()) : Collection<T> by innerList
```

- ìƒì†ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ” í´ë˜ìŠ¤ì—ê²Œ ìƒˆë¡œìš´ ë™ì‘ì„ ì¶”ê°€í•´ì•¼ í•  ë•Œ ì“°ëŠ” ë°©ë²•
- ê¸°ì¡´ í´ë˜ìŠ¤ ëŒ€ì‹  ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°ì½”ë ˆì´í„°(ìƒˆë¡œìš´ í´ë˜ìŠ¤)ë¥¼ ë§Œë“¤ë˜, ê¸°ì¡´ í´ë˜ìŠ¤ì™€ ê°™ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë°ì½”ë ˆì´í„°ê°€ ì œê³µí•˜ê³  ê¸°ì¡´ í´ë˜ìŠ¤ë¥¼ ë°ì½”ë ˆì´í„° ë‚´ë¶€ í•„ë“œë¡œ ìœ ì§€í•˜ëŠ” ê²ƒ
- ìƒˆë¡œ ì •ì˜í•´ì•¼ í•˜ëŠ” ê¸°ëŠ¥ì€ ë°ì½”ë ˆì´í„°ì˜ ë©”ì„œë“œë¡œ ìƒˆë¡œ ì •ì˜
- ê¸°ì¡´ ê¸°ëŠ¥ì´ ê·¸ëŒ€ë¡œ í•„ìš”í•œ ë¶€ë¶„ì€ ë°ì½”ë ˆì´í„°ì˜ ë©”ì„œë“œê°€ ê¸°ì¡´ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œì—ê²Œ ìš”ì²­ì„ ì „ë‹¬
- ë‹¨ì : ì¤€ë¹„ ì½”ë“œê°€ ìƒë‹¹íˆ ë§ì´ í•„ìš”í•¨.
- ì½”í‹€ë¦°ì€ by í‚¤ì›Œë“œë¥¼ í†µí•´ ì œê³µí•¨.

## ğŸ“– 4.4 object í‚¤ì›Œë“œ: í´ë˜ìŠ¤ ì„ ì–¸ê³¼ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì„ í•œêº¼ë²ˆì— í•˜ê¸°

object í‚¤ì›Œë“œë¥¼ ì“°ëŠ” ìƒí™©

- ê°ì²´ ì„ ì–¸
- ë™ë°˜ ê°ì²´
- ê°ì²´ ì‹
  - ìë°”ì˜ ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤

### ğŸ”– 4.4.1 ê°ì²´ ì„ ì–¸: ì‹±ê¸€í„´ì„ ì‰½ê²Œ ë§Œë“¤ê¸°

```kotlin
object Payroll {
    val allEmployees = arrayListOf<Person>()
    
    fun calculateSalary() {
        for (person in allEmployees) {
            
        }
    }
}
```

- ê°ì²´ ì„ ì–¸ì€ object í‚¤ì›Œë“œë¡œ ì‹œì‘
- ê°ì²´ ì„ ì–¸ì€ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ê³  ê·¸ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ ë³€ìˆ˜ì— ì €ì¥í•˜ëŠ” ëª¨ë“  ì‘ì—…ì„ í•œ ë¬¸ì¥ìœ¼ë¡œ ì²˜ë¦¬

```kotlin
object CaseInsensitiveFileComparator : Comparator<File> {
    override fun compare(file1: File, file2: File): Int {
        return file1.path.compareTo(file2.path, ignoreCase = true)
    }
}

fun main() {
    println(
        CaseInsensitiveFileComparator.compare(
            File("/User"), File("/user")
        )
    )
}
```

- ì¼ë°˜ ê°ì²´(í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤)ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê³³ì—ì„œëŠ” í•­ìƒ ì‹±ê¸€í„´ ê°ì²´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

### ğŸ”– 4.4.2 ë™ë°˜ ê°ì²´: íŒ©í† ë¦¬ ë©”ì„œë“œì™€ ì •ì  ë©¤ë²„ê°€ ë“¤ì–´ê°ˆ ì¥ì†Œ

- ì½”í‹€ë¦° í´ë˜ìŠ¤ ì•ˆì—ëŠ” ì •ì ì¸ ë©¤ë²„ê°€ ì—†ë‹¤.
  - íŒ¨í‚¤ì§€ ìˆ˜ì¤€ì˜ ìµœìƒìœ„ í•¨ìˆ˜ì™€ ê°ì²´ ì„ ì–¸ì„ í™œìš©
  - ëŒ€ë¶€ë¶„ ìµœìƒìœ„ í•¨ìˆ˜ë¥¼ í™œìš©í•˜ëŠ” í¸ì„ ë” ê¶Œì¥í•œë‹¤.

```kotlin
class MyClass {
    companion object {
        fun callMe() {
            println("Companion object called")
        }
    }
}

fun main() {
    MyClass.callMe()
}
```

- í´ë˜ìŠ¤ ì•ˆì— ì •ì˜ëœ ê°ì²´ ì¤‘ í•˜ë‚˜ì— companionì´ë¼ëŠ” íŠ¹ë³„í•œ í‘œì‹œë¥¼ ë¶™ì¼ ìˆ˜ ìˆë‹¤.
- ê°ì²´ ë©¤ë²„ì— ì ‘ê·¼í•  ë•Œ ìì‹ ì„ ê°ì‹¸ëŠ” í´ë˜ìŠ¤ì˜ ì´ë¦„ì„ í†µí•´ ì§ì ‘ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

```kotlin
fun main() {
    val myObject = MyClass()
    myObject.callMe() // error
}
```

- í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” ë™ë°˜ ê°ì²´ì˜ ë©¤ë²„ì— ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.

```kotlin
class User {
    val nickname: String
    
    constructor(email: String) {
        nickname = email.substringBefore('@')
    }
    
    constructor(socialAccountId: Int) {
        nickname = getSocialNetworkName(socialAccountId)
    }
}
```

```kotlin
class User private constructor(val nickname: String) {
    companion object {
        fun newSubscribingUser(email: String) = User(email.substringBefore('@'))
        fun newSocialUser(accountId: Int) = User(getNameFromSocialNetwork(accountId))
    }
}
```

- ë™ë°˜ ê°ì²´ê°€ private ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ê¸° ì¢‹ì€ ìœ„ì¹˜ë‹¤.
- ë°”ê¹¥ìª½ í´ë˜ìŠ¤ì˜ private ìƒì„±ìë„ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
- ì¦‰, íŒ©í† ë¦¬ íŒ¨í„´ì„ êµ¬í˜„í•˜ê¸° ê°€ì¥ ì í•©í•œ ìœ„ì¹˜ê°€ ë  ìˆ˜ ìˆë‹¤.
- íŒ©í† ë¦¬ ë©”ì„œë“œëŠ” ê·¸ íŒ©í† ë¦¬ ë©”ì„œë“œê°€ ì„ ì–¸ëœ í´ë˜ìŠ¤ì˜ í•˜ìœ„ í´ë˜ìŠ¤ ê°ì²´ë¥¼ ë°˜í™˜í•  ìˆ˜ë„ ìˆë‹¤.

### ğŸ”– 4.4.3 ë™ë°˜ ê°ì²´ë¥¼ ì¼ë°˜ ê°ì²´ì²˜ëŸ¼ ì‚¬ìš©

```kotlin
class Person(val name: String) {
    companion object Loader {
        fun fromJSON(jsonText: String): Person = /* */
    }
}
```

- í•„ìš”í•˜ë‹¤ë©´ ë™ë°˜ê°ì²´ì— ì´ë¦„ì„ ë¶™ì¼ ìˆ˜ ìˆë‹¤.

#### ğŸ› ï¸ ë™ë°˜ ê°ì²´ì—ì„œ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„

```kotlin
interface JSONFactory<T> {
    fun fromJSON(jsonText: String): T
}

class Person(val name: String) {
    companion object : JSONFactory<Person> {
        override fun fromJSON(jsonText: String): Person = /* */
    }
}
```

- ë™ë°˜ ê°ì²´ë„ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

#### ğŸ› ï¸ ë™ë°˜ ê°ì²´ í™•ì¥

```kotlin
class Person(val firstName: String, val lastName: String) {
    companion object {
    }
}

fun Person.Companion.fromJSON(json: String): Person {
}
```

- ë§ˆì¹˜ ë™ë°˜ ê°ì²´ ì•ˆì—ì„œ `fromJSON` í•¨ìˆ˜ë¥¼ ì •ì˜í•œ ê²ƒì²˜ëŸ¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
- ë™ë°˜ ê°ì²´ì— ëŒ€í•œ í™•ì¥ í•¨ìˆ˜ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìœ¼ë ¤ë©´ ì›ë˜ í´ë˜ìŠ¤ì— ë™ë°˜ ê°ì²´ë¥¼ ê¼­ ì„ ì–¸í•´ì•¼ í•œë‹¤.

### ğŸ”– 4.4.4 ê°ì²´ ì‹: ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ë¥¼ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì‘ì„±

```kotlin
interface MouseListener {
    fun onEnter()
    fun onClick()
}

class Button(private val listener: MouseListener) {
    
}
```

```kotlin
fun main() {
    Button(object : MouseListener {
        override fun onEnter() {}
        override fun onClick() {}
    })
}
```

- ê°ì²´ ì‹ì„ ì‚¬ìš©í•´ ìµëª… ê°ì²´ë¥¼ ë§Œë“ ë‹¤.
- ê°ì²´ ì„ ì–¸ê³¼ ê°™ì§€ë§Œ ì´ë¦„ì´ ë¹ ì¡Œë‹¤.
- ê°ì²´ ì‹ì€ ìµëª… ê°ì²´ ì•ˆì—ì„œ ì—¬ëŸ¬ ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œí•´ì•¼ í•˜ëŠ” ê²½ìš°ì— í›¨ì”¬ ë” ìœ ìš©í•˜ë‹¤.

## ğŸ“– 4.5 ë¶€ê°€ ë¹„ìš© ì—†ì´ íƒ€ì… ì•ˆì „ì„± ì¶”ê°€: ì¸ë¼ì¸ í´ë˜ìŠ¤

```kotlin
fun addExpense(expense: Int) {
    // ë¹„ìš©ì„ ë¯¸êµ­ ë‹¬ëŸ¬ì˜ ì„¼íŠ¸ ë‹¨ìœ„ë¡œ ì €ì¥
}
```

- 200ì—” ì§€ì¶œì„ ì¶”ê°€í•˜ë ¤ë©´ Int íƒ€ì…ìœ¼ë¡œë§Œ ë°›ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ì˜ë¯¸ì˜ ê°’ì„ ì „ë‹¬í•˜ëŠ” ê²ƒì„ ë§‰ì„ ìˆ˜ ì—†ë‹¤.
- ì „í˜•ì ì¸ í•´ë²•ì€ Int ëŒ€ì‹  Classë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ

```kotlin
class UsdCent(val amount: Int)

fun addExpense(expense: UsdCent) {
    // ë¹„ìš©ì„ ë¯¸êµ­ ë‹¬ëŸ¬ì˜ ì„¼íŠ¸ ë‹¨ìœ„ë¡œ ì €ì¥
}
```

- ìœ„ì™€ ê°™ì´ êµ¬í˜„í•˜ë©´ GC ë¹„ìš©ì´ ì¦ê°€í•˜ê²Œ ëœë‹¤.

```kotlin
@JvmInline
value class UsdCent(val amount: Int)
```

- ì¸ë¼ì¸ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ì„±ëŠ¥ì„ í¬ìƒí•˜ì§€ ì•Šê³  íƒ€ì… ì•ˆì •ì„±ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.
- ì‹¤í–‰ ì‹œì ì— UsdCentì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” ê°ì‹¸ì§„ í”„ë¡œí¼í‹°ë¡œ ëŒ€ì²´ëœë‹¤.
- ì¸ë¼ì¸ìœ¼ë¡œ í‘œì‹œí•˜ë ¤ë©´ í´ë˜ìŠ¤ê°€ í”„ë¡œí¼í‹°ë¥¼ í•˜ë‚˜ë§Œ ê°€ì ¸ì•¼ í•˜ë©°, ê·¸ í”„ë¡œí¼í‹°ëŠ” ì£¼ ìƒì„±ìì—ì„œ ì´ˆê¸°í™”ë¼ì•¼ í•œë‹¤.
- ì¸ë¼ì¸ í´ë˜ìŠ¤ëŠ” í´ë˜ìŠ¤ ê³„ì¸µì— ì°¸ì—¬í•˜ì§€ ì•ŠëŠ”ë‹¤.
  - ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ìƒì†í•  ìˆ˜ë„, ë‹¤ë¥¸ í´ë˜ìŠ¤ê°€ ìƒì†í•  ìˆ˜ë„ ì—†ìŒ.
  - ì¸í„°í˜ì´ìŠ¤ ìƒì†, ë©”ì„œë“œ ì •ì˜, ê³„ì‚°ëœ í”„ë¡œí¼í‹°ë¥¼ ì œê³µ
